/*! For license information please see c__DocListViewer.0655dd1e.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1203,235,649],{1204:function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return u}));var n=r(514),o=r.n(n),a=o()(window.appData&&window.appData.defaultSpaceHost).host;a=a.split(".").slice(-2).join(".");var i={relocate:function(t,e){e?setTimeout((function(){window.location.href=i.normalize(t)}),e):window.location.href=i.normalize(t)},normalize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=o()(t).host||"";if(e){if(e===window.location.host)return t;if(e===a)return t;if(!e.endsWith(a))return"/";var r=e.slice(0,-a.length);return/^[.a-zA-Z0-9_-]+\.$/.test(r)?t:"/"}return"/"!==t[0]&&(t="/".concat(t)),t}},c=(i.normalize,i.relocate);function u(){var t=window.location.hash,e=decodeURIComponent(t.split("#")[1]),r=document.getElementById(e);r&&r.scrollIntoView()}},1250:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},i=r(17),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))};c.displayName="FileOutlined";e.a=o.forwardRef(c)},1337:function(t,e,r){"use strict";r(2923);var n=r(1249);r(1505);e.a=n.a},1382:function(t,e,r){"use strict";var n=r(329);r.d(e,"a",(function(){return n.a}))},1408:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-avatar-upload",t.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),n.createElement("path",{d:"M177.268 80.262c4.525 3.166 10.76 2.064 13.926-2.461 3.11-4.445 2.102-10.538-2.222-13.754l-.24-.173-43.535-30.457a30 30 0 0 0-34.01-.264l-.384.264-43.535 30.457c-4.526 3.166-5.628 9.401-2.462 13.927 3.11 4.444 9.18 5.587 13.682 2.627l.244-.166 43.536-30.457a10 10 0 0 1 11.197-.18l.267.18 43.536 30.457Z",fillRule:"nonzero"}),n.createElement("rect",{x:118,y:39,width:20,height:150,rx:10})))},1420:function(t,e,r){"use strict";var n=r(1421);r.d(e,"a",(function(){return n.a}))},1421:function(t,e,r){"use strict";var n=r(0),o=r.n(n),a=r(5),i=r.n(a),c=r(952),u=r(649),l=r(628),s=r(230),f=r(140);e.a=function(t){var e=window.appData.isPublicCloud,r=t.group,n=t.size,a=t.showOrgLabel,d=void 0!==a&&a,p=t.iconSize,h=t.radius,m=t.className,y=null==r?void 0:r.organization,v=(null==r?void 0:r.iconMap)||f.d;s.c.isPublicPage(r)&&(v[0]=f.f[0]);var g=l.b.getName("User",r)||v[0];return o.a.createElement("div",{className:i()("group-avatar",m),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}},e&&d&&y&&o.a.createElement("span",{className:"lock"},o.a.createElement(u.c,{src:y.logo,size:n>32?20:13,radius:100})),r?o.a.createElement(c.a,{src:r.avatar||r.avatar_url||r.avatarUrl,size:n,className:i()({"group-type-default":g}),name:r.name,icon:g,iconSize:p||Math.floor(.9*n),radius:h}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},1456:function(t,e,r){"use strict";var n=r(1204);r.d(e,"a",(function(){return n.a})),r.d(e,"b",(function(){return n.b}))},1529:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},i=r(17),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))};c.displayName="MinusSquareOutlined";e.a=o.forwardRef(c)},1530:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},i=r(17),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))};c.displayName="PlusSquareOutlined";e.a=o.forwardRef(c)},1531:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},i=r(17),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))};c.displayName="CaretDownFilled";e.a=o.forwardRef(c)},1532:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},i=r(17),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))};c.displayName="FolderOpenOutlined";e.a=o.forwardRef(c)},1533:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},i=r(17),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))};c.displayName="FolderOutlined";e.a=o.forwardRef(c)},1616:function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||r.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},1618:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-check",t.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M210.827 55.428c3.906-3.905 10.237-3.905 14.143 0 3.834 3.834 3.904 10.007.209 13.927l-.21.215-124 124c-3.834 3.834-10.007 3.904-13.926.21l-.216-.21-55.708-55.708c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.835 10.008-3.904 13.927-.21l.215.21 48.637 48.636 116.93-116.928Z",fill:"currentColor",fillRule:"nonzero"}),n.createElement("path",{d:"M0 0h256v256H0z"})))},1726:function(t,e,r){var n=r(214),o=r(268),a=r(483),i=r(364);t.exports=function(t,e){if(null==t)return{};var r=n(i(t),(function(t){return[t]}));return e=o(e),a(t,r,(function(t,r){return e(t,r[0])}))}},3310:function(t,e,r){var n=r(180),o=r(96);t.exports=function(t){return o(t)&&n(t)}},3323:function(t,e,r){var n=r(427),o=r(268),a=r(632),i=r(506),c=r(3310),u=r(799),l=a((function(t){var e=u(t);return c(e)&&(e=void 0),i(n(t,1,c,!0),o(e,2))}));t.exports=l},3359:function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));r(143);var n=r(67),o=r(0),a=r.n(o),i=r(11),c=r(46),u=r(185),l=r(230),s=r(228),f=r(238),d=["group","size","placement","getPopupContainer"];function p(){return p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p.apply(this,arguments)}function h(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var m=function(t){var e,r,o,s=t.group,m=t.size,y=t.placement,v=t.getPopupContainer,g=h(t,d);y=y||"top",m=m||14;var b=(null===(e=window.appData)||void 0===e?void 0:e.organization)||(null===(r=window.appData)||void 0===r?void 0:r.currentOrganization)||s.organization||{id:s.organization_id},w=Object(u.c)({type:"group",target:s,group:s,org:b}),E=Object(u.d)({privacy:w,type:"group",organization:b,group:s});return a.a.createElement(n.a,{title:a.a.createElement("span",null,E,!Object(l.h)(s)&&(null===(o=s.abilities)||void 0===o?void 0:o.manage)&&a.a.createElement("a",{onClick:function(t){t.stopPropagation(),f.b.windowOpen("/".concat(s.login,"/settings/permission"))},style:{marginLeft:12}},__("切换公开性"))),getPopupContainer:v,placement:y},a.a.createElement("span",{className:"name-lock"},a.a.createElement(c.b,p({},g,{name:w!==i.PRIVACY.private?"icon-public":(null==s||s.extend_private,i.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:m,height:m}))))},y=function(t){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"group-access-scope"})}},a.a.createElement(m,t))}},3407:function(t,e,r){"use strict";e.a={contentArea:"index-module_contentArea_0xSfa",switchTitle:"index-module_switchTitle_qW8aM",switchButton:"index-module_switchButton_xHUSN",tip:"index-module_tip_eCtT0"}},3478:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));r(999);var n=r(651),o=r(0),a=r.n(o),i=r(3309),c=r(455),u=r(11),l=r(238),s=r(3407);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function E(){}var _={};l(_,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(A([])));S&&S!==r&&n.call(S,i)&&(_=S);var x=E.prototype=b.prototype=Object.create(_);function j(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==f(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,r,n){var o=h;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(f(e)+" is not iterable")}return w.prototype=E,o(x,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=l(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,l(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},j(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(x),l(x,u,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function p(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var h=function(t){t.type;var e=t.checked,r=t.organization,o=t.onChangePermission,f=a.a.useMemo((function(){var t=null!=r&&r.id?c.a.ORG:c.a.PERSON;return Object(l.a)()?t:c.a.INTERNAL}),[r]),h=function(){var t,e=(t=d().mark((function t(e){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e?f===c.a.PERSON?u.PRIVACY.public:u.PRIVACY.intranet:u.PRIVACY.private,o(r);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){p(a,n,o,i,c,"next",t)}function c(t){p(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:s.a.contentArea},a.a.createElement("span",{className:s.a.switchTitle},i.p[f]),a.a.createElement("div",{className:s.a.switchButton},a.a.createElement(n.a,{size:"small",onChange:h,checked:e}))))}},3488:function(t,e,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=r(5),u=r.n(c),l=r(1420),s=r(230),f=r(3359),d="index-module_groupName_DppYx",p="index-module_groupNameText_XYhrt",h="index-module_groupNameScope_qP0XF",m=function(t){var e=t.group,r=t.size,n=t.nameStyleCls,a=t.linkStyleCls,i=t.showName,c=void 0===i||i,m=t.isLink,y=void 0===m||m,v=t.iconSize,g=t.radius,b=Object(s.e)(e)||Object(s.h)(e),w=c?o.a.createElement("a",{"data-testid":"group-name-link",href:"/".concat(e.login),title:e.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},e.name),b&&o.a.createElement("span",{className:h},o.a.createElement(f.a,{group:e,size:16}))):null;return!y&&w&&(w=o.a.createElement("span",{title:e.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},e.name),b&&o.a.createElement("span",{className:h},o.a.createElement(f.a,{group:e,size:16})))),o.a.createElement(o.a.Fragment,null,y?o.a.createElement("a",{"data-testid":"group-avatar-link",href:"/".concat(e.login),title:e.name,className:a},o.a.createElement(l.a,{group:e,size:r,iconSize:v,radius:g})):o.a.createElement(l.a,{group:e,size:r,iconSize:v,radius:g}),w)};m.propTypes={organization:i.a.object,group:i.a.object.isRequired,size:i.a.number,showName:i.a.bool,isLink:i.a.bool,nameStyleCls:i.a.string,iconSize:i.a.number,radius:i.a.number};e.a=m},3512:function(t,e,r){"use strict";r(650);var n=r(319),o=(r(41),r(9)),a=r(480),i=r(0),c=r(1420),u=r(140),l=(r(161),r(23)),s=r(5),f=r.n(s),d=r(1382),p=(r(279),r(138)),h=(r(456),r(203)),m=(r(1453),r(1327)),y=(r(37),r(10)),v=r(1408),g=r(46),b=r(329);function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=function(){var t=w(Object(i.useState)(),2),e=t[0],r=t[1],n=w(Object(i.useState)(),2),o=n[0],a=n[1],c=new FileReader;return c.addEventListener("load",(function(){r(c.result)}),!1),Object(i.useEffect)((function(){o&&c.readAsDataURL(o)}),[o]),{url:e,uploadFile:a}},O=r(181),S="index-module_iconListContainer_2kTPj",x="index-module_iconListHeader_zgb1B",j="index-module_iconListHeaderTab_Rb7UW",k="index-module_iconListHeaderTabActive_l9CpK",L="index-module_iconListContent_5acPP",T="index-module_iconListIconContainer_W2jPd",C="index-module_iconListIconContainerActive_m+9aX",P="index-module_groupIconBtn_1pBes",N="index-module_groupIconBtnLarge_PGNAs",A="index-module_uploader_uEToK",D="index-module_dragger_yzTL7",I="index-module_imageContainer_lklS2",R="index-module_uploaderContainer_Y0VkK",G="index-module_reupload_3agQP",M="index-module_uploaderFooter_F5A9k",F="index-module_previewContainer_s7urA",B="index-module_preview_8GFmF";function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function U(){return U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U.apply(this,arguments)}function K(){K=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==z(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(z(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function V(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){V(a,n,o,i,c,"next",t)}function c(t){V(a,n,o,i,c,"throw",t)}i(void 0)}))}}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var W=function(t){var e=t.value,r=t.onChange,n=t.uploadUrl,a=t.hideDropdown,c=function(t){var e=t.uploadUrl,r=t.onChange,n=t.hideDropdown,o=Object(i.useRef)(),a=_(),c=a.url,u=a.uploadFile,l=Object(i.useRef)(),s=H(Object(i.useState)(!1),2),f=s[0],d=s[1],p=function(){var t=q(K().mark((function t(){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.current){t.next=2;break}return t.abrupt("return");case 2:if(void 0!==o.current.getCroppedCanvas()){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new Promise((function(t,r){o.current.getCroppedCanvas().toBlob((function(n){var o=new FormData;o.append("file",n,"image.png"),Object(O.ajax)({url:e,method:"POST",data:o,dataType:"json",processData:!1,success:function(e){t(e.data.url)},error:function(t){r(t),y.a.error(__("上传失败"))}})}))})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=q(K().mark((function t(){var e;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,p();case 4:e=t.sent,null==r||r(e),n();case 7:return t.prev=7,d(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})));return function(){return t.apply(this,arguments)}}();return{loading:f,localUrl:c,cropper:o,getUploadProps:function(){return{name:"file",showUploadList:!1,dataType:"json",accept:"image/*",beforeUpload:function(t){return t.size/1024/1024>20?(y.a.error(__("图片大小不能超过 {size}M",{size:20})),!1):(u(t),!1)}}},upload:p,preview:l,onOk:h}}({uploadUrl:n,onChange:r,hideDropdown:a}),u=c.loading,l=c.cropper,s=c.getUploadProps,f=c.localUrl,d=c.preview,w=c.onOk;return React.createElement("div",{className:A,"data-testid":"mocked-avatar-uploader"},f||e?React.createElement(p.a,{spinning:!1},React.createElement("div",{className:I},React.createElement("div",{className:R},React.createElement(m.a,{ref:l,src:f||e,containerWidth:window.h5?200:320,cropWidth:window.h5?200:320,aspectRatio:1,preview:d}),React.createElement(b.a,{ml:40,className:F},React.createElement("div",{className:B,ref:d}),React.createElement(b.a,{mt:16},__("预览")))),React.createElement(h.a,s(),React.createElement(o.a,{icon:React.createElement(v.default,null),className:G},__("重新上传"))),React.createElement("div",{className:M},React.createElement(o.a,{onClick:function(){return a()}},__("取消")),React.createElement(o.a,{type:"primary",onClick:w,loading:u},__("确定"))))):React.createElement(h.a.Dragger,U({},s(),{className:D}),React.createElement(o.a,{icon:React.createElement(g.b,{name:"avatar-upload",size:16})},__("上传头像")),React.createElement(b.a,{variant:"caption",fontSize:14,mt:12},__("在此上传或拖入头像"))))};W.defaultProps={uploadUrl:"/api/upload/avatar"};var X=W;function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function J(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==$(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z=function(t){var e=t.value,r=t.onChange,n=t.hideDropdown,o=t.avatar,a=t.setFieldsValue,i=t.iconMap||u.d;return React.createElement("div",{className:L},i.map((function(t){return React.createElement(d.a,{className:f()(T,J({},C,e===t&&!o)),type:"iconButton",onClick:function(){a({avatar:null}),null==r||r(t),n()}},React.createElement(g.b,{name:t,size:24}))})))};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function tt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Q(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nt=function(t){var e=et(Object(i.useState)(0),2),r=e[0],n=e[1],o=(null==t?void 0:t.iconMap)||u.d,a=[__("图标"),__("自定义")];return React.createElement("div",{className:f()(S,t.prefixCls)},React.createElement("div",{className:x},a.map((function(t,e){return React.createElement(d.a,{mr:8,className:f()(j,tt({},k,r===e)),onClick:function(){return n(e)},"data-testid":"GroupAvatarSelector-Tabs-".concat(e)},t)}))),React.createElement(l.a.Item,{noStyle:!0,shouldUpdate:function(t,e){return t.avatar!==e.avatar}},(function(e){var n=e.setFieldsValue,a=e.getFieldValue;return React.createElement(l.a.Item,{name:"scene",noStyle:!0,hidden:0!==r,initialValue:o[0]},React.createElement(Z,{iconMap:o,setFieldsValue:n,hideDropdown:t.hideDropdown,avatar:a("avatar")}))})),React.createElement(l.a.Item,{name:"avatar",noStyle:!0,hidden:1!==r},React.createElement(X,{hideDropdown:t.hideDropdown})))};function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ct(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ot(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.getFieldValue,r=t.style,l=t.largeSize,s="publicPage"===t.type?u.f:u.d,f=Object(a.f)((function(t){return t.group})),d=e("scene")||s[0],p=e("avatar"),h=ut(Object(i.useState)(!1),2),m=h[0],y=h[1];return React.createElement(n.a,{overlay:React.createElement(nt,{iconMap:s,avatar:p,hideDropdown:function(){return y(!1)}}),trigger:["click"],visible:m,onVisibleChange:y},React.createElement(o.a,{"data-testid":"GroupAvatarSelector",className:l?N:P,style:r,icon:React.createElement(c.a,{group:it(it({},f),{},{avatar:p,scene:d,avatar_url:p,iconMap:s}),iconSize:l?38:27,size:38,radius:6})}))}},3514:function(t,e,r){"use strict";r(229);var n=r(34),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(222),l=r.n(u),s=r(1212),f=r(230),d=r(356),p=r(3488),h=r(3526),m="index-module_name_2g47z";function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g=n.a.Option;function b(t){var e,r=t.current,i=t.disabled,c=t.groups,u=t.orgs,v=t.placeholder,b=t.size,w=t.loading,E=Object(f.h)()?__("知识小组"):__("团队"),_=y(Object(o.useState)(!1),2),O=_[0],S=_[1];function x(t,e){var r=e.type;return"User"===(null==e?void 0:e.type)&&(r="Group"),t.type===r&&t.id===e.id}function j(){S(!0)}return a.a.createElement("div",{className:"group-selector ".concat(t.className||""),"data-testid":"group-selector"},a.a.createElement(n.a,{size:b,showSearch:!0,disabled:i,loading:w,getPopupContainer:function(t){return t.parentNode},placeholder:v,dropdownMatchSelectWidth:!1,notFoundContent:a.a.createElement("div",{className:"blankslate"},a.a.createElement("span",null,Object(f.h)()?__("没有{groupTitle}信息",{create:a.a.createElement("a",{onClick:j},__("新建")),groupTitle:E}):__("没有{groupTitle}信息，快去{create}一个吧",{create:a.a.createElement("a",{onClick:j},__("新建")),groupTitle:E}))),value:r&&(e=r,null!=e&&e.id?"".concat("isNewOrg"in e?"organization":"group","-").concat(null==e?void 0:e.id):null),onChange:function(e,r){var n;(null!=c&&c.length||null!=u&&u.length)&&(null!=r&&null!==(n=r.value)&&void 0!==n&&n.startsWith("organization")&&(r.target.type="Organization"),t.onChange&&t.onChange(r.target))},filterOption:function(t,e){if(!e.target)return!1;var r=e.target,n=r.login,o=r.name,a=t.toLowerCase();return n.toLowerCase().indexOf(a)>=0||o.toLowerCase().indexOf(a)>=0},placement:"bottomLeft"},c&&c.length?l()(c,"id").map((function(t){return a.a.createElement(g,{"data-testid":"group-selector-".concat(t.login),key:"group-".concat(t.id),value:"group-".concat(t.id),target:t,title:t.name},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(p.a,{organization:t.organization,group:t,size:24,showCard:!1,nameStyleCls:m,isLink:!1})),x(r,t)&&a.a.createElement(s.default,null))})):null,null!=u&&u.length?u.map((function(t){return a.a.createElement(g,{key:"organization-".concat(t.id),value:"organization-".concat(t.id),title:t.name,target:t},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(d.g,{className:"group-selector-org-icon",src:t.logo||t.logo_url,size:24,radius:"2px"}),a.a.createElement(d.h,{organization:t,className:"group-selector-org-name"})),x(r,t)&&a.a.createElement(s.default,null))})):null),a.a.createElement(h.default,{isModalVisible:O,handleCancel:function(){S(!1)}}))}b.defaultProps={size:"middle",placeholder:__("请选择{groupTitle}",{groupTitle:Object(f.h)()?__("知识小组"):__("团队")}),groups:[],current:{},onChange:function(){}},b.propTypes={groups:c.a.arrayOf(c.a.object),current:c.a.shape({login:c.a.string,name:c.a.string}),onChange:c.a.func,className:c.a.string,placeholder:c.a.string,disabled:c.a.bool,size:c.a.string};e.a=b},3520:function(t,e,r){var n=r(465),o=r(808),a=r(809),i=r(214),c=r(216),u=r(466);t.exports=function(t,e,r,l){var s=-1,f=o,d=!0,p=t.length,h=[],m=e.length;if(!p)return h;r&&(e=i(e,c(r))),l?(f=a,d=!1):e.length>=200&&(f=u,d=!1,e=new n(e));t:for(;++s<p;){var y=t[s],v=null==r?y:r(y);if(y=l||0!==y?y:0,d&&v==v){for(var g=m;g--;)if(e[g]===v)continue t;h.push(y)}else f(e,v,l)||h.push(y)}return h}},3526:function(t,e,r){"use strict";r.r(e);r(37);var n=r(10),o=(r(73),r(31)),a=(r(60),r(14)),i=(r(41),r(9)),c=(r(161),r(23)),u=r(0),l=r.n(u),s=r(2),f=r.n(s),d=r(1726),p=r.n(d),h=r(3323),m=r.n(h),y=r(1619),v=r(3370),g=r(480),b=r(3373),w=r(3374),E=r(3375),_=b.a.LiteSearchSelector,O=function(t){var e,r,n={type:t.type,me:t.me},o=Object(u.useMemo)((function(){return w.a.create(n)}),[n]);return null!==(e=t.organization)&&void 0!==e&&e.id&&(r=l.a.createElement(E.a,null)),l.a.createElement(_,{type:t.type,userClassType:"normal",isLiteSearchSelector:!0,searchUser:o.searchUser,getDefaultUsers:t.getDefaultUsers||o.searchUsersByIds,checkValid:o.checkValid,onChange:t.onChange,initialValues:t.initialValues,notFoundContent:r})};O.propTypes={type:f.a.string,onChange:f.a.func,initialValues:f.a.array,getDefaultUsers:f.a.func};var S=Object(g.d)((function(t){return{organization:t.organization,me:t.me}}))(O),x=r(50),j=r(3478),k=r(11),L=r(3305),T=r(140),C=r(1404),P=r(22),N=r(3512),A=r(329),D={newGroupModal:"index-module_newGroupModal_An+Qw",title:"index-module_title_gTevv",titleDesc:"index-module_titleDesc_EmDkC",newGroupModalContent:"index-module_newGroupModalContent_LFB42",nameWrapper:"index-module_nameWrapper_OFOD6",avatarGroup:"index-module_avatarGroup_olnac",addMember:"index-module_addMember_i0kI8",addMemberBtn:"index-module_addMemberBtn_nvC2a",btnText:"index-module_btnText_6V0fp",submitBtn:"index-module_submitBtn_ZJkHv"};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){M(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t,e,r){return e=function(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===I(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||V(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(){B=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==I(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(I(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function z(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function U(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){z(a,n,o,i,c,"next",t)}function c(t){z(a,n,o,i,c,"throw",t)}i(void 0)}))}}function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||V(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){if(t){if("string"==typeof t)return q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var H=c.a.Item,Y=function(t){var e=t.isModalVisible,r=t.handleCancel,s=t.organization,f=K(Object(u.useState)(),2),d=f[0],h=f[1],g=K(Object(u.useState)(!0),2),b=g[0],w=g[1],E=K(Object(u.useState)(!1),2),_=E[0],O=E[1],I=K(Object(u.useState)(!1),2),R=I[0],G=I[1],M=K(Object(u.useState)([]),2),z=M[0],V=M[1],q=K(Object(u.useState)(k.PRIVACY.private),2),Y=q[0],W=q[1],X=Object(u.useRef)(),$=Object(u.useRef)(null),J=Object(u.useMemo)((function(){return z.map((function(t){return t.user_id||t.id}))}),[z]);Object(u.useEffect)((function(){var t;null===(t=X.current)||void 0===t||t.focus()}),[]);var Z=K(c.a.useForm(),1)[0],Q=function(t){t&&t.preventDefault(),G((function(t){return!t}))};function tt(){return(tt=U(B().mark((function e(r){var o,a,i,c,u,l,f,h;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),O(!0),o=Z.getFieldsValue(),z&&(o.members=z),a={name:d,description:o.description,avatar:o.avatar,public:Y,scene:o.scene||T.d[0]},null!=s&&s.id&&(a.organization_id=s.id),e.prev=6,e.next=9,x.a.groups.createGroup(a);case 9:if(i=e.sent){if(o.members)try{l=null===(u=o.members.find(L.a.isDepartment))||void 0===u?void 0:u.id,f=o.members.filter((function(t){return!L.a.isDepartment(t)})),h=p()({group_id:i.id,role:1,users:L.a.serializeUserPostBody(f),department_id:l}),x.a.groupUsers.create(h)}catch(t){n.a.error(t.message)}n.a.success(__("新建成功"),1e3),P.f?(Object(C.b)(),t.handleCancel()):window.location.href="/".concat(i.login),null===(c=t.handleSuccess)||void 0===c||c.call(t)}return O(!1),e.abrupt("return",i);case 15:e.prev=15,e.t0=e.catch(6),O(!1);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var et=Object(u.useCallback)(U(B().mark((function t(){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",z);case 1:case"end":return t.stop()}}),t)}))),[z]),rt=function(){var e=U(B().mark((function e(r){var n,o,a,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=$&&$.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$.current.searchSelectorBiz.getRealUsers(r);case 4:n=e.sent,o=t.me,a=o.user_id||o.id,i=n.filter((function(t){return(t.user_id||t.id)!==a})),V((function(t){var e=t.findIndex(L.a.isDepartment);return[e,i.findIndex(L.a.isDepartment)].every((function(t){return t>-1}))&&t.splice(e,1),m()([].concat(F(t),F(i)),(function(t){return t.user_id||t.id}))})),Q();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{className:D.newGroupModal,title:l.a.createElement("div",{className:D.title},l.a.createElement("p",null,__("新建团队")),l.a.createElement("p",{className:D.titleDesc},__("和成员一起进行项目协作和知识管理"))),width:432,visible:e,onCancel:r,footer:[l.a.createElement(i.a,{className:D.submitBtn,key:"submit",type:"primary",disabled:b,loading:_,onClick:function(t){return tt.apply(this,arguments)}},__("新建"))]},l.a.createElement("div",{className:D.newGroupModalContent},l.a.createElement(c.a,{form:Z,layout:"vertical",onValuesChange:function(t){Z.setFieldsValue(t)}},l.a.createElement(H,{name:"name",colon:!1,label:__("基本信息")},l.a.createElement("div",{className:D.nameWrapper},l.a.createElement(H,{noStyle:!0,shouldUpdate:function(t,e){return t.scene!==e.scene||t.avatar!==e.avatar}},(function(t){var e=t.getFieldValue;return l.a.createElement(A.a,{mr:8,component:N.a,componentProps:{getFieldValue:e}})})),l.a.createElement(a.a,{type:"text",autoComplete:"off",maxLength:36,placeholder:__("团队名称"),onChange:function(t){h(t.target.value),t.target.value.trim()?w(!1):w(!0)},ref:X}))),l.a.createElement(H,{colon:!1,name:"description"},l.a.createElement(a.a.TextArea,{className:"group-form-desc",autoComplete:"off",autoSize:{minRows:4},maxLength:100,placeholder:__("团队")+__("简介")})),l.a.createElement(H,{colon:!1,label:l.a.createElement("div",{className:D.addMember},l.a.createElement("div",{className:D.addMemberText},__("添加成员")),l.a.createElement("div",{onClick:Q},l.a.createElement("div",{className:D.addMemberBtn},l.a.createElement(y.default,null),l.a.createElement("span",{className:D.btnText},__("批量添加"))))),name:"users"},!R&&l.a.createElement(S,{getDefaultUsers:window.appData.isYuque?null:et,type:"simple",initialValues:J,onChange:function(t){V(t)}})),l.a.createElement(H,{colon:!1,label:__("公开性")},l.a.createElement(j.a,{type:"group",checked:Y!==k.PRIVACY.private,onChangePermission:function(t){W(t)},organization:s}))))),R&&l.a.createElement(v.a,{ref:$,type:"simpleWithRole",visible:R,title:__("批量添加"),roles:[{key:"member",label:__("成员"),value:2}],onCancel:Q,onSubmit:rt,initialValues:J,getDefaultUsers:window.appData.isYuque?null:et}))};Y.propTypes={isModalVisible:f.a.bool,handleCancel:f.a.func,handleSuccess:f.a.func,group:f.a.object,organization:f.a.object};e.default=function(t){var e=window.appData,r=e.me,n=e.organization,o=G(G({},t),{},{me:r,organization:n});return l.a.createElement(Y,o)}},3601:function(t,e,r){"use strict";r(73);var n=r(31),o=(r(41),r(9)),a=(r(279),r(138)),i=(r(37),r(10)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(57),d=r.n(f),p=r(1424),h=r(362),m=r(380),y=r(458),v=r(238),g=r(1321),b=r.n(g),w=r(228),E=r(267),_=r(22),O=r(1431),S=r(962),x="DocExport-module_docExport_zwx9b",j="DocExport-module_title_eGdGG",k="DocExport-module_entry_qjwYu",L="DocExport-module_setting_yai1Y",T="DocExport-module_settingTitle_IjcSw",C="DocExport-module_settingUpload_3ymtX";function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){D(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function D(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===P(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(){I=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(N([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==P(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(P(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function R(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function G(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){R(a,n,o,i,c,"next",t)}function c(t){R(a,n,o,i,c,"throw",t)}i(void 0)}))}}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var B=Object(E.b)((function(){return Promise.all([r.e(12),r.e(24),r.e(1227)]).then(r.bind(null,4832))}),{suspense:!0}),z=S.a.STATUS,U=function(t){var e=t.bookId,r=t.exportParams,l=t.onCancel,s=t.wrapModal,f=void 0===s||s,g=function(t){var e=t.doc,r=t.bookId,n=t.exportParams,o=M(Object(c.useState)(e||null),2),a=o[0],i=o[1],l=M(Object(c.useState)(!1),2),s=l[0],f=l[1],p=M(Object(c.useState)(e?b.a.SUPPORTED_EXPORT_FORMATS[e.type]:[]),2),h=p[0],m=p[1],v=Object(c.useRef)();return Object(c.useEffect)((function(){var t=a&&("Mind"===a.type||"Board"===a.type),e=null,o=function(){var t=G(I().mark((function t(){var e;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.doc_id){t.next=11;break}return f(!0),t.next=5,y.a.docs.findOne({id:n.toc_node_url,book_id:r});case 5:e=t.sent,i(e),f(!1),m(b.a.SUPPORTED_EXPORT_FORMATS[e.type]),t.next=12;break;case 11:m([b.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(a){if(!t)return;e=document.createElement("div"),document.body.appendChild(e),d.a.render(u.a.createElement(B,{height:"100%",width:"100%",onLoad:function(t){v.current=t},content:a.content}),e)}else o();return function(){e&&(document.body.removeChild(e),e=null)}}),[a]),{state:{currentDoc:a,loading:s,formats:h},lakeBoardEngineRef:v}}(t),w=g.state,E=w.currentDoc,P=w.loading,N=w.formats,D=g.lakeBoardEngineRef,R=M(Object(c.useState)(),2),F=R[0],U=R[1],K=M(Object(c.useState)(),2),V=K[0],q=K[1],H=M(Object(c.useState)(),2),Y=H[0],W=H[1],X=M(Object(c.useState)(z.INIT),2),$=X[0],J=X[1],Z=M(Object(c.useState)(""),2),Q=Z[0],tt=Z[1],et=Object(c.useRef)(),rt={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},nt=function(){var t=G(I().mark((function t(n){var o,a,i,c,u,l;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o={type:n,force:0},et.current&&(a=et.current.getValue())&&(o.options=JSON.stringify(a)),c=66e4/(i=5e3),u=0;case 5:if(!(u<c)){t.next=33;break}if(t.prev=6,"lakebook"!==n){t.next=13;break}return t.next=10,y.a.books.exports(A(A({},o),{},{id:e,title:r.toc_node_title,toc_node_uuid:r.toc_node_uuid,toc_node_url:r.toc_node_url,with_children:!0}));case 10:l=t.sent,t.next=17;break;case 13:if(!E){t.next=17;break}return t.next=16,y.a.docs.exports(A(A({},o),{},{id:E.id}));case 16:l=t.sent;case 17:if("success"!==l.state){t.next=19;break}return t.abrupt("return",l);case 19:if("error"!==l.state){t.next=23;break}if(!l.error){t.next=22;break}return t.abrupt("return",l.error);case 22:return t.abrupt("return",{error:l.message});case 23:return t.next=25,Object(h.a)(i);case 25:u++,t.next=31;break;case 28:return t.prev=28,t.t0=t.catch(6),t.abrupt("return",{error:t.t0.message});case 31:t.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return t.stop()}}),t,null,[[6,28]])})));return function(e){return t.apply(this,arguments)}}(),ot=function(){var t=G(I().mark((function t(e){var r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!E||b.a.SUPPORTED_EXPORT_FORMATS[E.type]){t.next=2;break}return t.abrupt("return");case 2:return U(e),J(z.PROCESSING),W(null),t.prev=5,t.next=8,nt(e);case 8:if(!(r=t.sent).error){t.next=13;break}return J(z.ERROR),tt(r.error),t.abrupt("return");case 13:U(e),J(z.SUCCESS),W(r.url),v.b.download(r.url),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(5),J(z.ERROR),tt(t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}(),at=(E&&("Mind"===E.type||E.type),function(){var t=G(I().mark((function t(e,r){var n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D.current&&(null===(n=D.current)||void 0===n||n.export(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),it=function(t){var e=E&&("Mind"===E.type||"Board"===E.type);!e||E.content?(q(b.a.THIRD_PARTY_FORMAT[t.toUpperCase()]),!e||t!==b.a.THIRD_PARTY_FORMAT.JPG.key&&t!==b.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==E?void 0:E.type)||"pdf"!==t)&&rt[t]?(U(t),J(z.SETTING)):ot(t):at(t,{filename:E.title})):i.a.warn(__("画板为空，请编辑发布后导出"))},ct=null;return $===z.PROCESSING?ct=V?u.a.createElement("div",{className:L},u.a.createElement("h1",{className:T},__("导出 {type}",{type:V.name})),u.a.createElement(S.a.Processing,{tip:__("正在导出中...")})):null:$===z.SUCCESS?ct=V?u.a.createElement("div",{className:L},u.a.createElement("h1",{className:T},__("导出 {type}",{type:V.name})),u.a.createElement(S.a.Success,{tip:__("文件生成成功"),action:u.a.createElement(m.a,{href:_.g?null:Y,desktopDisableHref:!0,target:"_blank",onClick:function(){v.b.download(Y)}},__("点击下载"))})):null:$===z.ERROR?ct=u.a.createElement(S.a.Error,{tip:__("文件生成失败"),error:Q,action:u.a.createElement(o.a,{icon:u.a.createElement(p.default,null),size:"small",onClick:function(){ot(F)}},__("重新生成"))}):$===z.INIT&&(ct=u.a.createElement("div",{className:k},u.a.createElement("div",{className:j},__("导出文档")),u.a.createElement(a.a,{spinning:P},u.a.createElement(O.a,{mode:"export",types:N,onSelect:it})))),ct=u.a.createElement("div",{className:x},ct,function(){if(!V||!E)return null;var t=rt[V.key];return t?u.a.createElement("div",{className:L,style:{display:$===z.SETTING?"block":"none"}},u.a.createElement("h1",{className:T},__("{type} 导出配置",{type:V.name})),u.a.createElement(S.a.AdvanceSetting,{wrappedComponentRef:et,target:E,type:V,settings:t,actions:u.a.createElement(o.a,{type:"primary",className:C,onClick:function(){return ot(F)}},__("导出"))})):null}()),u.a.createElement("div",null,f?u.a.createElement(n.a,{title:null,onCancel:l,visible:!0,footer:null,width:640,maskClosable:!1},ct):ct)};U.defaultProps={exportParams:{}},U.propTypes={doc:s.a.object,exportParams:s.a.object,bookId:s.a.number.isRequired,onCancel:s.a.func.isRequired,wrapModal:s.a.bool};e.a=Object(w.b)(U,!0)},3644:function(t,e,r){"use strict";r(41);var n=r(9),o=(r(279),r(138)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(331),s=r(1494),f=(r(139),r(44)),d=(r(229),r(34)),p=r(3663),h=r.n(p),m=r(148),y=r(50),v=r(959);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function b(){b=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function w(){}function E(){}var _={};l(_,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(A([])));S&&S!==r&&n.call(S,i)&&(_=S);var x=E.prototype=v.prototype=Object.create(_);function j(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==g(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(g(e)+" is not iterable")}return w.prototype=E,o(x,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=l(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,l(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},j(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(x),l(x,u,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function w(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function E(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){w(a,n,o,i,c,"next",t)}function c(t){w(a,n,o,i,c,"throw",t)}i(void 0)}))}}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var S=r(3514),x="index-module_repoSelector_2Z0BO",j="index-module_repoSelectorGroup_0chHn",k="index-module_repoSelectorRepo_nq0Ar",L="index-module_repoSelectorItem_-+1uF";function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function C(){C=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(A([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==T(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(T(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function P(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function N(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){P(a,n,o,i,c,"next",t)}function c(t){P(a,n,o,i,c,"throw",t)}i(void 0)}))}}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===T(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t){var e=window.appData,r=e.me,n=e.organization,o=null==n?void 0:n.id,i=t.defaultBook,c=t.defaultGroup,u=t.bookLayout,l=t.disableBooks,s=void 0===l?[]:l,f=R(Object(a.useState)([]),2),d=f[0],p=f[1],v=R(Object(a.useState)([c]),2),g=v[0],w=v[1],O=R(Object(a.useState)([]),2),S=O[0],x=O[1],j=R(Object(a.useState)([D(D({},i),{},{user:c})]),2),k=j[0],L=j[1],T=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=_(Object(a.useState)(t),2),r=e[0],n=e[1];return[r,function(t){return E(b().mark((function e(){var r=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,t.apply(void 0,r);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,n(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})))}]}(!1),P=R(T,2),A=P[0],I=P[1],G=R(Object(a.useState)(c||{}),2),M=G[0],F=G[1],B=R(Object(a.useState)({}),2),z=B[0],U=B[1],K=R(Object(a.useState)({}),2),V=K[0],q=K[1],H=i&&!s.includes(i)?i:{},Y=R(Object(a.useState)(H),2),W=Y[0],X=Y[1],$=R(Object(a.useState)(!1),2),J=$[0],Z=$[1],Q=499;function tt(t){return et.apply(this,arguments)}function et(){return(et=N(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.mine.groupsAll({offset:0,limit:Q,organization_id:null==e?void 0:e.id});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rt(t,e){return nt.apply(this,arguments)}function nt(){return(nt=N(C().mark((function t(e,r){var a,c,l,f,d;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(null===(a=e.abilities)||void 0===a?void 0:a.read)){t.next=2;break}return t.abrupt("return",i.user_id===e.id?[i]:[]);case 2:return c=m.MIXING_BOOK_TYPES.join(","),l=(null==n?void 0:n.id)||0,!o&&null!=r&&r.id&&(l=null==r?void 0:r.id),f={organization_id:l,type:c,filterByAbility:"create_doc",offset:0,limit:Q,group_id:e.id,sence:"collaborate",enable_group_filter:!0},t.next=8,y.a.mine.books(f);case 8:return d=t.sent,d=u?d.filter((function(t){return u.includes(t.layout)})):m.MIXING_BOOK_TYPES.includes(i.type)?d.filter((function(t){return m.MIXING_BOOK_TYPES.includes(t.type)})):d.filter((function(t){return t.type===i.type})),d=h()(d,s,"id"),t.abrupt("return",d);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(t){return at.apply(this,arguments)}function at(){return(at=N(C().mark((function e(r){var n,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!M||r.id!==M.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(rt)(r);case 4:n=e.sent,o=n?n[0]:{},L(n),F(r),X(o),t.onSelected(r,o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=N(C().mark((function e(r){var n,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!z||r.id!==z.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(rt)(r,V);case 4:n=e.sent,o=n?n[0]:{},L(n),U(r),X(o),t.onSelected(r,o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(t){return ut.apply(this,arguments)}function ut(){return(ut=N(C().mark((function e(r){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==V?void 0:V.id)!==(null==r?void 0:r.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(N(C().mark((function e(){var n,o,a,i,c;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(r);case 2:if(o=e.sent,a=(null==o?void 0:o[0])||{},i=[],null==a||!a.id){e.next=9;break}return e.next=8,rt(a,r);case 8:i=e.sent;case 9:c=(null===(n=i)||void 0===n?void 0:n[0])||{},q(r),x(o),U(a),L(i),X(c),t.onSelected(a,c);case 16:case"end":return e.stop()}}),e)}))))();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){return(lt=N(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:"Organization"===e.type?(F({}),ct(e)):(q({}),U({}),x([]),ot(e));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(){return ft.apply(this,arguments)}function ft(){return(ft=N(C().mark((function e(){var n,a,u,l,f,d;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=15;break}return a=m.MIXING_BOOK_TYPES.join(","),e.next=4,y.a.mine.groupsAll({offset:0,limit:Q,filterByAbility:"create_doc",type:a});case 4:if((u=e.sent)&&Array.isArray(u)&&u.unshift(r),w(u),Z(!0),n=c||u[0],c||F(n),o){e.next=15;break}return e.next=13,y.a.mine.organizations();case 13:l=e.sent,p(l);case 15:return e.next=17,rt(n);case 17:f=e.sent,L(f),i&&!s.includes(i)?d=i:(d=f?f[0]:{},X(d)),t.onSelected(n,d);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){I(st)()}),[]),{state:{currentOrg:V,currentGroup:M,currentOrgGroup:z,currentBook:W,orgs:d,groups:g,orgGroups:S,books:k,selectorLoading:A},onRepoSelect:function(e){var r=k.find((function(t){return t.id===e}))||{};X(r),t.onSelected(null!=V&&V.id?z:M,r)},onBelongSelect:function(t){return lt.apply(this,arguments)},onOrgGroupSelect:function(t){return it.apply(this,arguments)},onGroupSelect:ot}}function F(t){var e=t.disabled,r=M(t),n=r.state,a=n.currentOrg,c=n.currentGroup,u=n.currentOrgGroup,l=n.currentBook,s=n.orgs,p=n.groups,h=n.orgGroups,m=n.books,y=n.selectorLoading;return i.a.createElement(o.a,{spinning:y},i.a.createElement(f.a,{className:x,type:"flex","data-testid":"repo-selector"},i.a.createElement("div",{className:j},i.a.createElement(S.a,{current:null!=a&&a.id?a:c,disabled:e,loading:y,groups:p,orgs:s,onChange:r.onBelongSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/"),(null==a?void 0:a.id)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:j},i.a.createElement(S.a,{current:u,disabled:e,loading:y,groups:h,onChange:r.onOrgGroupSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/")),i.a.createElement(d.a,{showSearch:!0,style:{flex:1},className:k,disabled:e,value:l&&l.id,placeholder:__("请选择知识库"),onSelect:r.onRepoSelect,filterOption:function(t,e){if(t&&e.book)return e.book.name.toLowerCase().includes(t.toLowerCase())}},m.map((function(t){return i.a.createElement(d.a.Option,{key:t.id,value:t.id,book:t},i.a.createElement("div",{className:L},i.a.createElement(v.g,{group:t.user,book:t,iconSize:20})))})))))}F.defaultProps={onSelected:function(){},disableBooks:[]},F.propTypes={defaultGroup:u.a.object,defaultBook:u.a.object,bookLayout:u.a.array,disabled:u.a.bool,onSelected:u.a.func,disableBooks:u.a.array};var B=F,z=(r(625),r(200)),U=(r(77),r(33)),K=(r(169),r(40)),V=(r(143),r(67)),q=r(5),H=r.n(q),Y=r(3674),W=r(46),X="SearchCatalogTrigger-module_actionItem_rk-NO",$="SearchCatalogTrigger-module_searchContainer_Zv6BH",J="SearchCatalogTrigger-module_searchInput_4Tgor",Z="SearchCatalogTrigger-module_prefixIconWrapper_Ub-Vo",Q="SearchCatalogTrigger-module_searchIcon_RK482";function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rt(t){var e=function(t){var e=t.listData,r=t.onSelectOption,n=t.isLoading,o=tt(Object(a.useState)(!1),2),i=o[0],c=o[1];return{state:{inputVisible:i,searchOptions:Object(a.useMemo)((function(){return e.map((function(t){return{label:t.title,value:t.uuid}}))}),[e]),isLoading:n},handleTriggerClick:function(){c(!0)},handleBlur:function(){c(!1)},handleOptionSelect:function(t){t&&("function"==typeof r&&r({tocItemUuid:t}),c(!1))}}}(t),r=e.state,n=r.inputVisible,c=r.searchOptions,u=r.isLoading,l=e.handleTriggerClick,s=e.handleBlur,f=e.handleOptionSelect;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement("div",{className:$},i.a.createElement(d.a,{getPopupContainer:function(t){return t.parentElement},className:J,notFoundContent:u?i.a.createElement(o.a,{size:"small",delay:100}):null,showArrow:!1,autoFocus:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",options:c,placeholder:__("目录搜索"),onBlur:s,onChange:f}),i.a.createElement("span",{className:Z},i.a.createElement(W.b,{name:"help-search",width:16,height:16,className:Q}))):i.a.createElement(V.a,{title:__("目录搜索"),getPopupContainer:function(t){return t}},i.a.createElement("span",{className:X,onClick:l},i.a.createElement(W.b,{name:"help-search",width:16,height:16,className:Q}))))}var nt=rt;rt.defaultProps={listData:[],isLoading:!1},rt.propTypes={listData:u.a.arrayOf(u.a.object),isLoading:u.a.object,onSelectOption:u.a.func};var ot=r(225),at=r.n(ot),it=r(64);function ct(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||lt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||lt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){if(t){if("string"==typeof t)return st(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(t,e):void 0}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ft=r.n(it)()("CatalogSelecter:viewModel"),dt=["child","sibling"];var pt={useViewModel:function(t,e){var r,n,o=t.catalog,i=t.disableItems,c=void 0===i?[]:i,u=t.submitType,l=t.currentSelectedUId,s=t.currentSelectedAction,f=c.map((function(t){return t.uuid})),d=ut(Object(a.useState)(null),2),p=d[0],h=d[1],m=ut(Object(a.useState)("child"),2),y=m[0],v=m[1],g=ut(Object(a.useState)("top"),2),b=g[0],w=g[1],E=ut(Object(a.useState)("auto"),2),_=E[0],O=E[1],S=ut(Object(a.useState)("copy"!==u),2),x=S[0],j=S[1],k=Object(a.useRef)(),L="all"===(r=t.catalogLevel)||r===1/0?1/0:parseInt(r,10)+1,T=ut(Object(a.useState)((n=L)===1/0?o.map((function(t){return t.uuid})):o.filter((function(t){return t.level<n-1})).map((function(t){return t.uuid}))),2),C=T[0],P=T[1],N=function(){var t=ct(C),e=[];if(p){!function t(r){if(r){var n=function(t){return o.find((function(e){return e.uuid===t.parent_uuid}))}(r);n&&(e.push(n.uuid),n.level>0&&t(n))}}(o.find((function(t){return t.uuid===p})))}return e.length&&t.push.apply(t,e),t};Object(a.useEffect)((function(){P(N())}),[p]);var A=function(t,e){var r=ct(C),n=r.findIndex((function(e){return e===t.uuid}));"sibling"===e?(n>=0&&r.splice(n,1),P(r)):n<0&&P([t.uuid].concat(ct(r)))},D=function(t,e,r,n){at()(n)||dt.includes(n)?t&&f.includes(t.uuid)||(t?(h(t.uuid),w(null),v(n||"child"),A(t,n||"child")):(h(null),w(r),O("auto"))):ft("invalid insert action type",n)},I=function(){if(!t.disable&&!f.includes(p)){var e={action:"prependChild",target_uuid:p,insert_to_catalog:!0,with_children:x};return"top"===b?(e.action="prependChild",e.target_uuid=null):"bottom"===b?(e.action="appendChild",e.target_uuid=null):e.action="sibling"===y?"moveAfter":"prependChild",e}};return Object(a.useEffect)((function(){var t=o.find((function(t){return t.uuid===l}));t&&D(t,0,null,s)}),[l,s]),Object(a.useImperativeHandle)(e,(function(){return{getSubmitParams:I}})),{state:{selectItemUId:p,action:y,position:b,expandedKeys:C,placeholderTop:_,level:L,withChildren:x,catalogTreeRef:k},onSelectItem:D,onChangeAction:function(t,e){if(!f.includes(e.uuid)){t.stopPropagation(),t.preventDefault();var r=t.target.value;v(r),A(e,r),"child"===r&&O("auto")}},onExpand:function(t,e){var r=e.expanded,n=e.node;if(P(t),"sibling"===y&&n.props.uuid===p)if(r){var o=document.querySelector(".ant-tree-treenode-selected");o&&setTimeout((function(){O(o.getBoundingClientRect().height)}),200)}else C.includes(n.props.uuid)||O("auto")},handleChangeWithChildren:function(t,e){j(t.target.checked)},getSubmitParams:I,handleCatalogSearchSelect:function(t){var e=t.tocItemUuid,r=o.find((function(t){return t.uuid===e}));D(r,0,null,"sibling");var n=setTimeout((function(){var t;null===(t=k.current)||void 0===t||t.scrollTo({key:r.uuid,align:"top",offset:100}),clearTimeout(n)}),300)},handleInsertToTop:function(t){return D(null,0,"top")},handleInsertToBottom:function(t){return D(null,0,"bottom")}}}},ht={card:"CatalogSelector-module_card_EnAh7",disabled:"CatalogSelector-module_disabled_DdXXq",titleWrapper:"CatalogSelector-module_titleWrapper_mcDOG",title:"CatalogSelector-module_title_ixnVK",docCatalogItem:"CatalogSelector-module_docCatalogItem_yI0aV",emptyViewInner:"CatalogSelector-module_emptyViewInner_FIALf",placeholder:"CatalogSelector-module_placeholder_topjs",caret:"CatalogSelector-module_caret_jxv72",placeholderSibling:"CatalogSelector-module_placeholderSibling_-rdTP",placeholderChild:"CatalogSelector-module_placeholderChild_uP7D6",actions:"CatalogSelector-module_actions_HKHke",topSimulator:"CatalogSelector-module_topSimulator_t0qhG",bottomSimulator:"CatalogSelector-module_bottomSimulator_HSsiS",textTip:"CatalogSelector-module_textTip_LK8n1",selected:"CatalogSelector-module_selected_JDZUv",wrapper:"CatalogSelector-module_wrapper_tsHiF",submitOptions:"CatalogSelector-module_submitOptions_Om8RW",submitOptionItem:"CatalogSelector-module_submitOptionItem_oqA8J",shortcutArea:"CatalogSelector-module_shortcutArea_AgvQv",shortcutTip:"CatalogSelector-module_shortcutTip_BR+Yo",shortcutActionCont:"CatalogSelector-module_shortcutActionCont_l0Ug2",shortcutAction:"CatalogSelector-module_shortcutAction_u+U2K",shortcutActionDisabled:"CatalogSelector-module_shortcutActionDisabled_+nyVB"};function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yt.apply(this,arguments)}function vt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==mt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===mt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var gt=i.a.forwardRef((function(t,e){var r=t.catalog,n=t.disableItems,o=t.submitType,c=t.currentSelectedUId,u=t.showChildrenOptions,s=t.extraOptions,f=t.maxHeight,d=t.hideCopyWithChildren,p=void 0!==d&&d,h=pt.useViewModel(t,e),m=Object(l.generateTreeByTocItems)(r),y=h.state,v=y.selectItemUId,g=y.action,b=y.position,w=y.expandedKeys,E=y.placeholderTop,_=y.level,O=y.withChildren,S=y.catalogTreeRef,x=__("插入");switch(o){case"move":x=__("移动");break;case"copy":x=__("复制");break;default:x=__("插入")}var j=[{label:__("同级"),value:"sibling"},{label:__("子级"),value:"child"}],k=function(){var t;return i.a.createElement("div",{"data-testid":"catalog-selector-tree-placeholder",className:H()([ht.placeholder],(t={},vt(t,ht.placeholderChild,v&&"child"===g),vt(t,ht.placeholderSibling,v&&"sibling"===g),t)),style:{top:E}},i.a.createElement(W.b,{name:"catalog-caret",width:13,height:6,className:ht.caret}))};Object(a.useEffect)((function(){if(c&&S.current){var t=S.current;setTimeout((function(){t.scrolled||t.scrollTo({key:c,align:"top",offset:100})}),300)}}),[c]);var L={data:m,listData:r,editable:!1,catalogLevel:_,disabledKeys:n.map((function(t){return t.uuid})),selectedKeys:v&&[v],expandedKeys:w,onSelect:h.onSelectItem,onExpand:h.onExpand,size:"normal"};r.length>10&&(L.height=f);var T=!r.length;return i.a.createElement("div",{className:ht.wrapper},i.a.createElement("div",{className:ht.shortcutArea},i.a.createElement("div",{className:ht.shortcutTip},__("请选择要放置的目录位置")),i.a.createElement("div",{className:ht.shortcutActionCont},i.a.createElement(nt,{listData:r,onSelectOption:h.handleCatalogSearchSelect}),i.a.createElement(V.a,{title:__("置顶")},i.a.createElement("span",{className:H()([ht.shortcutAction,vt({},ht.shortcutActionDisabled,T)]),onClick:function(t){T||h.handleInsertToTop(t)}},i.a.createElement(W.b,{name:"move-top",width:9,height:13,style:{fill:"red"}}))),i.a.createElement(V.a,{title:__("置底")},i.a.createElement("span",{className:H()([ht.shortcutAction,vt({},ht.shortcutActionDisabled,T)]),onClick:function(t){T||h.handleInsertToBottom(t)}},i.a.createElement(W.b,{name:"move-bottom",width:9,height:13}))))),i.a.createElement(U.a,{className:H()([ht.card])},i.a.createElement("div",{"data-testid":"catalog-selector-tree-top-simulator",className:ht.topSimulator},"top"===b&&k()),r.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a,yt({},L,{ref:S,renderTitle:function(t){return i.a.createElement("div",{className:ht.titleWrapper,"data-testid":"catalog-selector-tree-title-".concat(t.uuid)},i.a.createElement("div",{className:ht.title},t.title),v===t.uuid&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:ht.actions,"data-testid":"catalog-selector-insert-actions-".concat(t.uuid),onClick:function(t){t.stopPropagation()}},i.a.createElement("span",null,__("{actionType}为",{actionType:x})),i.a.createElement(K.a.Group,{value:h.state.action,onChange:function(e){h.onChangeAction(e,t)},options:j})),k()))}})),i.a.createElement("div",{"data-testid":"catalog-selector-tree-bottom-simulator",className:ht.bottomSimulator},"bottom"===b&&k())):i.a.createElement("div",{className:ht.emptyView},i.a.createElement("div",{className:ht.emptyViewInner},i.a.createElement("p",null,__("插入第一个目录节点"))))),i.a.createElement("div",{className:H()(t.optionClassnames,ht.submitOptions)},u&&!p&&i.a.createElement("div",{className:ht.submitOptionItem},i.a.createElement(z.a,{checked:O,onChange:h.handleChangeWithChildren},__("包含子文档"))),s))}));gt.defaultProps={catalog:[],catalogLevel:1/0,disableItems:[],maxHeight:326,hideCopyWithChildren:!1},gt.propTypes={catalog:u.a.array,catalogLevel:u.a.oneOfType([u.a.number,u.a.string]),submitType:u.a.oneOf(["create","move","copy"]),disableItems:u.a.array,showChildrenOptions:u.a.bool,optionClassnames:u.a.string,extraOptions:u.a.node,currentSelectedUId:u.a.string,maxHeight:u.a.number,hideCopyWithChildren:u.a.bool},gt.displayName="CatalogSelector";var bt=gt,wt="CatalogTransfer-module_wrapper_PCdb1",Et="CatalogTransfer-module_repoSelector_xEuzZ",_t="CatalogTransfer-module_selectBookTip_Ju7F8",Ot="CatalogTransfer-module_emptyIcon_tkaXF",St="CatalogTransfer-module_loading_MvRPo",xt="CatalogTransfer-module_footer_XgWWv",jt="CatalogTransfer-module_actions_3DruK",kt="CatalogTransfer-module_selectorOptions_evk3C";function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){Pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Lt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Lt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nt(){Nt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Lt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Lt(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function At(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){At(a,n,o,i,c,"next",t)}function c(t){At(a,n,o,i,c,"throw",t)}i(void 0)}))}}function It(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||Gt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(t){return function(t){if(Array.isArray(t))return Mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Gt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){if(t){if("string"==typeof t)return Mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mt(t,e):void 0}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ft(t,e){var r,n=[],o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Gt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=Object(l.findAllChildrenByParentNode)(t,a,!0)||[];n.push.apply(n,Rt(i))}}catch(t){o.e(t)}finally{o.f()}return n}var Bt=i.a.forwardRef((function(t,e){var r=t.currentGroup,c=t.currentBook,u=t.disableSelectorBooks,l=t.showRepoSelector,f=t.submitType,d=t.hideCopyWithChildren,p=void 0!==d&&d,h=t.disableSelector,m=function(t){var e,r=t.currentGroup,n=t.currentBook,o=t.items,i=t.showRepoSelector,c=t.submitType,u=It(Object(a.useState)(r),2),l=u[0],f=u[1],d=It(Object(a.useState)(n),2),p=d[0],h=d[1],m=It(Object(a.useState)([]),2),y=m[0],v=m[1],g=It(Object(a.useState)([]),2),b=g[0],w=g[1],E=It(Object(a.useState)(!0),2),_=E[0],O=E[1],S=It(Object(a.useState)(!1),2),x=S[0],j=S[1],k=o&&Array.isArray(o)&&1===o.length,L="child";if(p.id===n.id&&k){var T=o[0].uuid,C=o[0].doc_id,P=(N=y.find((function(t){return t.uuid===T||t.doc_id===C})),A=e,D=L,N&&(A=N.prev_uuid,N.prev_uuid&&N.parent_uuid!==N.prev_uuid?(A=N.prev_uuid,D="sibling"):A=N.parent_uuid),{uuid:A,actionType:D});e=P.uuid,L=P.actionType}var N,A,D;var I,R=Object(a.useMemo)((function(){return o.reduce((function(t,e){var r=b.find((function(t){return t.uuid===e.uuid||t.doc_id===e.doc_id}));return r&&t.push(r),t}),[])}),[o,b]),G=Object(a.useMemo)((function(){return Array.isArray(R)&&R.length&&"move"===c&&p.id===n.id?[].concat(R,Ft(y,R)):[]}),[y,n.id,p.id,R]),M=function(){var t=Dt(Nt().mark((function t(e){var r,o;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,s.a.getCatalogNodes(e.id);case 3:r=t.sent,o=r?r.toc:[],v(o),e.id===n.id&&w(o),O(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){return i||M(n),j(!1)}),[i,n]),{state:{targetGroup:l,targetBook:p,toc:y,items:R,disableItemsInToc:G,loading:_,submitting:x,defaultSelectedCatalogNodeUid:e,defaultSelectedNodeActionType:L},handleSelect:(I=Dt(Nt().mark((function t(e){var r,n=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},e&&f(e),r&&h(r),!e||!r){t.next=6;break}return t.next=6,M(r);case 6:case"end":return t.stop()}}),t)}))),function(t){return I.apply(this,arguments)}),setSubmitting:j}}(t),y=m.state,v=y.targetGroup,g=y.targetBook,b=y.toc,w=y.disableItemsInToc,E=y.loading,_=y.submitting,O=y.defaultSelectedCatalogNodeUid,S=y.defaultSelectedNodeActionType,x=y.items,j=m.setSubmitting,k=i.a.useRef(),L=Array.isArray(x)&&x.some((function(t){return!!t.child_uuid})),T=function(){var e=Dt(Nt().mark((function e(){var r,n,o,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return");case 2:return j(!0),r={targetGroup:v,targetBook:g},Array.isArray(x)&&x.length&&(n=x.map((function(t){return t.uuid})),r.node_uuid=n[0]),o={},k&&k.current&&(o=k.current.getSubmitParams()),e.prev=7,e.next=10,t.onSubmit(Ct(Ct({},o),r));case 10:return a=e.sent,j(!1),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(7),j(!1);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),C=(g.toc||[]).length,P=48+(C>10?326:32*C);return i.a.createElement("div",{className:wt},l&&i.a.createElement("div",{className:Et},i.a.createElement(B,{defaultGroup:r,defaultBook:c,disableBooks:u,onSelected:m.handleSelect,disabled:h})),E?i.a.createElement(o.a,{className:St,size:"large",style:{height:P}}):i.a.createElement(i.a.Fragment,null,v&&g&&g.id?i.a.createElement(bt,{currentSelectedUId:O,currentSelectedAction:S,submitType:f,targetBook:g,catalog:b,catalogLevel:g.catalog_display_level,disableItems:w,ref:k,optionClassnames:kt,showChildrenOptions:L,hideCopyWithChildren:p}):i.a.createElement("div",{className:_t},i.a.createElement("img",{className:Ot,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*9iSQTaU_i9kAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("span",null,__("暂无目录，选择知识库后可查看")))),i.a.createElement("div",{className:xt},i.a.createElement("div",{className:jt},i.a.createElement(n.a,{onClick:t.onCancel},__("取消")),i.a.createElement(n.a,{type:"primary",onClick:T,loading:_,disabled:!v||!g||!g.id||_,"data-testid":"catalog-transfer-btn-submit"},__("确认")))))}));Bt.defaultProps={showRepoSelector:!0,items:[]},Bt.propTypes={currentGroup:u.a.object,currentBook:u.a.object.isRequired,disableSelectorBooks:u.a.array,items:u.a.array,onSubmit:u.a.func.isRequired,onCancel:u.a.func.isRequired,submitType:u.a.oneOf(["create","move","copy","add"]).isRequired,showRepoSelector:u.a.bool,hideCopyWithChildren:u.a.bool},Bt.displayName="CatalogTransfer";e.a=Bt},3645:function(t,e,r){var n=r(3520),o=r(427),a=r(632),i=r(3310),c=a((function(t,e){return i(t)?n(t,o(e,1,i,!0)):[]}));t.exports=c},3663:function(t,e,r){var n=r(3520),o=r(427),a=r(268),i=r(632),c=r(3310),u=r(799),l=i((function(t,e){var r=u(e);return c(r)&&(r=void 0),c(t)?n(t,o(e,1,c,!0),a(r,2)):[]}));t.exports=l},3674:function(t,e,r){"use strict";r(1505);var n=r(1337),o=r(0),a=r.n(o),i=r(1407),c=r(64),u=r.n(c),l=r(5),s=r.n(l),f=r(2),d=r.n(f),p=r(702),h=r.n(p),m=r(3645),y=r.n(m),v=r(283),g=r(331),b={loading:"index-module_loading_6Xjs9",titleWrapper:"index-module_titleWrapper_NRfy4",wrapper:"index-module_wrapper_G8dbv",scrolled:"index-module_scrolled_ZXFD1",topScrolled:"index-module_topScrolled_8VE-9",bottomScrolled:"index-module_bottomScrolled_G+APF",dragging:"index-module_dragging_fFNee",normalWrapper:"index-module_normalWrapper_9CiWJ",largeWrapper:"index-module_largeWrapper_SUwil",ListTocWrapper:"index-module_ListTocWrapper_4wy2S"};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(){return E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},E.apply(this,arguments)}function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=j(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function x(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(){L=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var E={};l(E,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(A([])));O&&O!==r&&n.call(O,i)&&(E=O);var S=b.prototype=v.prototype=Object.create(E);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==w(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(w(e)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function T(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=D(t);if(e){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return A(t)}(this,r)}}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function I(t,e,r){return(e=R(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}var G="catalog-tree",M="".concat(G,"-drag-container"),F=u()(G),B=n.a.DirectoryTree,z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(c,t);var e,r,n,o=N(c);function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),I(A(e=o.call(this,t)),"initScrollValue",(function(){e.scrolled=!0})),I(A(e),"initScrollMask",(function(){if(e.props.showScrollMask){var t=e.getCurrentScrollElement();if(t){var r=e.containerElem.getBoundingClientRect().height;e.virtualListEnabled()&&(r=e.props.height);var n=t.childNodes[0].offsetHeight,o=!1,a=!1;n>r&&(o=!0,a=!0,t.scrollTop<=0?o=!1:t.scrollTop>=n-r&&(a=!1));var i={};o!==e.state.showTopScrollMask&&(i.showTopScrollMask=o),a!==e.state.showBottomScrollMask&&(i.showBottomScrollMask=a),e.setState(i)}}})),I(A(e),"onExpand",(function(t,r){var n=r.expanded,o=r.node;e.expandLocked||e.setState({expandedKeys:t,currentNodeExpanded:n,autoExpandParent:!1},(function(){e.props.onExpand&&e.props.onExpand(t,{expanded:n,node:o}),e.timer&&clearTimeout(e.timer),e.timer=setTimeout(e.initScrollMask,200)}))})),I(A(e),"onSelect",(function(t,r){var n=t[0],o=r.node.props,a=o.type,i=e.props.toggleTitleOnSelect,c=e.state.expandedKeys.slice(),u=c.findIndex((function(t){return t===n}));u<0?c.push(n):a===v.TYPES.title&&i&&c.splice(u,1),e.setState({expandedKeys:c,selectedKeys:[n]});var l=e.props.onSelect;l&&([v.TYPES.doc,v.TYPES.link,v.TYPES.uncreated_doc,v.TYPES.title].includes(a)&&l(o,r.nativeEvent))})),I(A(e),"onCheck",(function(t,r){e.props.onCheck&&e.props.onCheck(t,r)})),I(A(e),"getAction",(function(t){var e=t.node.pos.split("-");return-1===t.dropPosition-Number(e[e.length-1])?v.ACTIONS.moveBefore:t.dropToGap?v.ACTIONS.moveAfter:v.ACTIONS.prependChild})),I(A(e),"onDrop",function(){var t,r=(t=L().mark((function t(r){var n,o,a,i,c,u;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.node.key,o=r.dragNode.key,e._showLoading(),a=e.getAction(r),F("发出 Action",i={action:a,target_uuid:n,node_uuid:o}),t.next=8,e.props.onAction(i);case 8:[v.ACTIONS.prependChild].includes(a)&&(c=e.state.expandedKeys,(u=c.slice()).includes(n)||(u.push(n),e.setState({expandedKeys:u}))),e.props.onDragEnd&&e.props.onDragEnd(r.dragNode),e.setState({draggingNode:null}),e._hideLoading();case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){T(a,n,o,i,c,"next",t)}function c(t){T(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t){return r.apply(this,arguments)}}()),I(A(e),"onDragEnd",(function(t){if(e.props.onDragEnd&&e.props.onDragEnd(t.dragNode),e._hideLoading(),e.cacheExpandedKey){var r=x(e.state.expandedKeys);if(!r.includes(e.cacheExpandedKey)){var n=x(new Set([].concat(x(r),[e.cacheExpandedKey])));e.setState({draggingNode:null,expandedKeys:n}),e.props.onExpand(n)}e.collapseTimer&&clearTimeout(e.collapseTimer),e.cacheExpandedKey=null}else e.setState({draggingNode:null})})),I(A(e),"onDragStart",(function(t){var r=t.event,n=t.node;if(n.expanded?(e.collapseTimer&&clearTimeout(e.collapseTimer),e.collapseTimer=setTimeout((function(){var t=x(e.state.expandedKeys);if(t.includes(n.uuid)){e.cacheExpandedKey=n.uuid;var r=y()(t,[n.uuid]);e.setState({draggingNode:n,expandedKeys:r}),e.props.onExpand(x(new Set(r)))}}),10)):e.setState({draggingNode:n}),r.dataTransfer){var o=document.getElementById(M);o&&document.body.removeChild(o);var a=document.createElement("div");a.style.position="fixed";var i=e.props.offscreenRendering;a.style.top=i?"-100px":"0px",a.style.left="0px",a.style.cursor="grabbing",a.id=M,a.innerText=r.target.innerText,document.body.appendChild(a),r.dataTransfer.setDragImage(a,16,10),r.dataTransfer.dropEffect="none"}e.props.onDragStart&&e.props.onDragStart(n)})),I(A(e),"_showLoading",(function(){if(e.loadingElem){var t=e.containerElem.getBoundingClientRect(),r=t.x,n=t.width;e.loadingElem.style.left="".concat(r,"px"),e.loadingElem.style.width="".concat(n,"px"),e.loadingElem.style.display="block"}})),I(A(e),"_hideLoading",(function(){e.loadingElem&&(e.loadingElem.style.display="none")})),I(A(e),"scrollTo",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.virtualListEnabled()){if(!e.treeRef)return;e.treeRef.scrollTo(t)}else{var r=e.containerElem.querySelector('[data-uuid="catalog-'.concat(t.key,'"]'));if(!r)return;var n=r.closest(".ant-tree-treenode");e.containerElem.scrollTop=n.offsetTop-t.offset}})),I(A(e),"_getChildNodeUIds",(function(t){return t&&t.child_uuid?Object(g.findAllChildrenByParentNode)(e.props.listData,t,!0).map((function(t){return t.uuid})):[]})),I(A(e),"getTreeData",(function(){var t=e.props,r=t.data,n=t.disabledKeys,o=t.disabledCheckedKeys,i=t.highlightKeys,c=t.renderTitle,u=t.visibleFilter,l=0,f=x(n);if(e.state.draggingNode){var d=e._getChildNodeUIds(e.state.draggingNode);d&&d.length&&f.push.apply(f,x(d))}return function t(e){var r,n=[],d=S(e=e.filter(u));try{for(d.s();!(r=d.n()).done;){var p=r.value,h=f.includes(p.uuid),m=i.includes(p.uuid),y=o&&o.includes(p.uuid);p.index=l,l++;var v=O(O({},p),{},{disableCheckbox:y,"data-tree-index":p.index,"data-uuid":"catalog-".concat(p.uuid),key:p.uuid,className:s()(["catalog-treenode-level-".concat(p.level+1)],{"catalog-item-highlight":m,"catalog-item-disabled":h}),title:a.a.createElement("div",{className:s()(b.titleWrapper,I({},b.titleDisabled,h))},c(p,p.index))});p.children&&p.children.length&&(v.children=t(p.children)),n.push(v)}}catch(t){d.e(t)}finally{d.f()}return n}(r)})),e.maxNodeLengthForLoading=100,e.scrolled=!1;var r=t.expandedKeys||e.getExpandKeysByLevel(t);return e.state={draggingNode:null,expandedKeys:r,selectedKeys:t.selectedKeys||[],currentNodeExpanded:!0,autoExpandParent:!0,showTopScrollMask:!1,showBottomScrollMask:!1},e}return e=c,r=[{key:"componentDidMount",value:function(){var t=this.getCurrentScrollElement();t&&t.addEventListener("scroll",this.initScrollValue,!1),this.props.showScrollMask&&(this.initScrollMask(),t&&t.addEventListener("scroll",this.initScrollMask,!1));var e=this.containerElem;e&&this.props.enableScrollHelper&&e.addEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"componentWillUnmount",value:function(){var t=this.getCurrentScrollElement();t&&(t.removeEventListener("scroll",this.initScrollValue,!1),t.removeEventListener("scroll",this.initScrollMask,!1));var e=this.containerElem;e&&e.removeEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this,r=this.props,n=r.catalogLevel,o=r.expandedKeys,a=t.catalogLevel,i=t.expandedKeys,c=t.selectedKeys;if(!h()(i,o)){var u=i||this.lastExpandedKeys;return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:u})}if(i&&!h()(i,this.state.expandedKeys))return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:i});a!==n&&this.setState((function(r){return{expandedKeys:e.getExpandKeysByLevel(t,r.currentNodeExpanded)}})),c&&!h()(c,this.state.selectedKeys)&&this.setState({selectedKeys:c})}},{key:"shouldComponentUpdate",value:function(t,e){return!this.props.editable||!(t.catalogLevel===this.props.catalogLevel&&t.rerenderString===this.props.rerenderString&&t.height===this.props.height&&h()(t.highlightKeys,this.props.highlightKeys)&&h()(t.listData,this.props.listData)&&h()(t.checkedKeys,this.props.checkedKeys)&&h()(t.disabledCheckedKeys,this.props.disabledCheckedKeys)&&h()(e,this.state))}},{key:"dragoverEdgeToScroll",value:function(t){var e=t.clientY,r=document.documentElement,n=r.scrollTop;n>199&&e<150&&r.scrollTop>0?r.scrollTop=n-10:e>window.innerHeight-150&&r.scrollTop<r.scrollHeight-r.offsetHeight&&(r.scrollTop=n+10)}},{key:"getCurrentScrollElement",value:function(){var t=this.containerElem;return this.virtualListEnabled()&&(t=document.querySelector(".ant-tree-list-holder")),t}},{key:"virtualListEnabled",value:function(){var t=this.props,e=t.listData,r=void 0===e?[]:e,n=t.height;return r.length>this.maxNodeLengthForLoading&&n}},{key:"lockExpand",value:function(){var t=this;this.expandLocked=!0,setTimeout((function(){t.expandLocked=!1}),100)}},{key:"foldAll",value:function(){this.setState({expandedKeys:[],autoExpandParent:!1}),this.props.onExpand&&this.props.onExpand([])}},{key:"unfoldAll",value:function(){var t=this.getExpandKeysByLevel(O(O({},this.props),{},{catalogLevel:1/0}));this.setState({expandedKeys:t}),this.props.onExpand&&this.props.onExpand(t)}},{key:"getExpandKeysByLevel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.catalogLevel,n=t.listData,o=t.selectedKeys;if(r===1/0)return n.map((function(t){return t.uuid}));var a,i=[],c=S(n);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.level<r-1&&i.push(u.uuid)}}catch(t){c.e(t)}finally{c.f()}return o&&o.length&&e&&i.push.apply(i,x(o)),i}},{key:"render",value:function(){var t,e=this,r=this.props,n=r.listData,o=r.editable,c=void 0!==o&&o,u=r.wrapperClassName,l=void 0===u?"":u,f=r.size,d=r.height,p=r.onRightClick,h=r.checkable,m=r.checkStrictly,y=r.checkedKeys,v={},g={};this.virtualListEnabled()?(v.virtual=!0,v.height="large"===f?d-32:d):(v.virtual=!1,d&&(g.height=d,g.overflow="hidden auto")),p&&(v.onRightClick=function(t){return p(t.node.props)});var w=this.state,_=w.expandedKeys,O=void 0===_?[]:_,S=w.selectedKeys,j=w.autoExpandParent,k=w.showTopScrollMask,L=w.showBottomScrollMask,T=w.draggingNode,C=this.getTreeData();return a.a.createElement("div",{"data-testid":G,className:s()(l,b.wrapper,(t={},I(t,b.largeWrapper,"large"===f),I(t,b.normalWrapper,"normal"===f),I(t,b.editable,c),I(t,b.dragging,!!T),I(t,b.scrolled,k||L),I(t,b.topScrolled,k),I(t,b.bottomScrolled,L),t))},a.a.createElement("div",{style:g,ref:function(t){e.containerElem=t}},a.a.createElement(B,E({switcherIcon:a.a.createElement("span",{className:"lake-icon lake-icon-catalog-switcher",style:{fontSize:"16px",fontWeight:"500"}}),showIcon:!1,showLine:!1,draggable:c,expandedKeys:x(new Set(O)),selectedKeys:x(new Set(S)),blockNode:!0,expandAction:"click",autoExpandParent:j,onExpand:this.onExpand,onSelect:this.onSelect,onDrop:this.onDrop,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onCheck:this.onCheck,treeData:C,checkable:h,checkStrictly:m,checkedKeys:y,ref:function(t){e.treeRef=t}},v)),n.length>this.maxNodeLengthForLoading&&a.a.createElement("div",{className:b.loading,ref:function(t){e.loadingElem=t}},a.a.createElement(i.default,null))))}}],r&&C(e.prototype,r),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.Component);z.defaultProps={listData:[],highlightKeys:[],selectedKeys:[],disabledKeys:[],size:"normal",toggleTitleOnSelect:!1,visibleFilter:function(){return!0},enableScrollHelper:!1,onExpand:function(){}},z.propTypes={autoExpandParent:d.a.bool,size:d.a.oneOf(["normal","large"]),toggleTitleOnSelect:d.a.bool,data:d.a.array.isRequired,listData:d.a.array,editable:d.a.bool.isRequired,offscreenRendering:d.a.bool,onRightClick:d.a.func,onAction:d.a.func,renderTitle:d.a.func.isRequired,catalogLevel:d.a.number,wrapperClassName:d.a.string,onSelect:d.a.func,onDragStart:d.a.func,onDragEnd:d.a.func,onExpand:d.a.func,visibleFilter:d.a.func,highlightKeys:d.a.array,expandedKeys:d.a.array,selectedKeys:d.a.array,disabledKeys:d.a.array,checkedKeys:d.a.object,height:d.a.number,showScrollMask:d.a.bool,rerenderString:d.a.string,enableScrollHelper:d.a.bool,checkable:d.a.bool,checkStrictly:d.a.bool,onCheck:d.a.func,disabledCheckedKeys:d.a.array};e.a=z},3963:function(t,e,r){"use strict";e.a={wrapper:"TransferDoc-module_wrapper_+Jtte",tip:"TransferDoc-module_tip_lNpqo"}},4062:function(t,e,r){"use strict";r(73);var n=r(31),o=(r(37),r(10)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(174),s=r(50),f=r(3644),d=r(3963);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(){h=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:L(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function E(){}var _={};l(_,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(A([])));S&&S!==r&&n.call(S,i)&&(_=S);var x=E.prototype=b.prototype=Object.create(_);function j(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==p(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function L(e,r,n){var o=d;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(p(e)+" is not iterable")}return w.prototype=E,o(x,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=l(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,l(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},j(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(x),l(x,u,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){g(a,n,o,i,c,"next",t)}function c(t){g(a,n,o,i,c,"throw",t)}i(void 0)}))}}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=window.appData.isDesktopApp,O=function(t){var e,r=t.docIds,c=t.book,u=t.submitType,p=t.container,m=t.silentOperation,v=w(Object(a.useState)(!0),2),g=v[0],E=v[1],O=function(){E(!1),t.hide()},S=function(t){var e="highlightBookImport_".concat(t.slug,"_").concat(t.id);l.a.set(e,t.last_toc?t.last_toc.uuid:"_")},x=function(){var e=b(h().mark((function e(n){var a,u,l,f,d,p,v,g,b,w,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.targetBook,u=n.targetGroup,l=n.target_uuid,f=n.action,d=n.insert_to_catalog,e.next=3,s.a.docs.copy({ids:r,book_id:c.id,target_book_id:a.id,target_node_uuid:l,action:f,insert_to_catalog:d});case 3:p=e.sent,v=p.docs,g=p.toc,t.onSubmit({targetBook:y(y({},a),{},{toc:g}),docs:v}),b=c.id===a.id,m||(w=v[0],E=w?"/go/doc/".concat(v[0].id):"/".concat(u.login,"/").concat(a.slug),o.a.success(i.a.createElement("span",null,_||b?__("复制成功"):i.a.createElement(i.a.Fragment,null,__("已复制到："),i.a.createElement("a",{href:E,target:"_blank"},a.name))),3)),O();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=b(h().mark((function e(n){var a,u,l,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.targetGroup,u=void 0===a?{}:a,l=n.targetBook,f=void 0===l?{}:l,d=n.target_uuid,p=n.action,e.next=3,s.a.docs.addToCatalog({ids:r,book_id:c.id,target_node_uuid:d,action:p});case 3:return v=e.sent,e.next=6,t.onSubmit({targetBook:y(y({},f),{},{toc:v})});case 6:m||o.a.success(i.a.createElement(i.a.Fragment,null,__("已成功添加到目录")," ",!_&&i.a.createElement("a",{href:"/".concat(u.login,"/").concat(f.slug),target:"_blank"},__("查看"))),3),O();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=b(h().mark((function e(n){var a,u,l,f,d,p,y,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.targetGroup,u=void 0===a?{}:a,l=n.targetBook,f=void 0===l?{}:l,d=n.target_uuid,p=n.action,y=n.insert_to_catalog,f.id!==c.id){e.next=3;break}return e.abrupt("return",j(n));case 3:return e.next=5,s.a.docs.move({ids:r,book_id:c.id,target_book_id:f.id,target_node_uuid:d,action:p,insert_to_catalog:y});case 5:(v=e.sent).targetBook&&S(v.targetBook),t.onSubmit({docIds:r,targetBook:f}),m||(o.a.success(i.a.createElement("span",null,__("已移动到："),i.a.createElement("a",{href:"/".concat(u.login,"/").concat(f.slug),target:"_blank"},f.name)),3),O());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L="move"===u,T="add"===u;return e=T?__("添加到目录"):__("{submitType}到...",{submitType:L?__("移动"):__("复制")}),i.a.createElement(n.a,{className:d.a.wrapper,title:e,visible:g,width:"600px",footer:null,onCancel:O,getContainer:p},T?null:i.a.createElement("div",{className:d.a.tip},__("可{submitType}到有创建权限的知识库",{submitType:L?__("移动"):__("复制")})),i.a.createElement(f.a,{items:r.map((function(t){return{doc_id:t}})),currentGroup:t.group,currentBook:t.book,disableSelectorBooks:L?[t.book]:[],submitType:u,mode:"doc",onSubmit:function(t){return T?j(t):L?k(t):x(t)},onCancel:O,showRepoSelector:!T}))};O.defaultProps={onSubmit:function(){},silentOperation:!1},O.propTypes={docIds:u.a.array.isRequired,group:u.a.object.isRequired,book:u.a.object.isRequired,hide:u.a.func.isRequired,onSubmit:u.a.func,submitType:u.a.oneOf(["move","copy","add"]).isRequired,silentOperation:u.a.bool},O.displayName="TransferDoc",e.a=O},4476:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o}));var n=function(){return window.self!==window.top};function o(t){var e=document.querySelector("#".concat(t.id));if(e)return e;var r=document.createElement("div");return r.id=t.id,document.body.append(r),r}},5653:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return It}));var n=r(0),o=r.n(n),a=r(480),i=r(35),c=r(2),u=r.n(c),l=r(4095),s=r(3964),f=r(22),d=r(4688),p=r(3601),h=r(4062),m=r(120);function y(t){var e=t.activeModalType,r=t.group,n=t.book,a=t.candidateDocIds,i=t.singleCandidateDoc,c=t.onAddSubmitSuccess,u=t.onCopyDocsSuccess,l=t.onMoveDocsSuccess,s=t.onCancel;return o.a.createElement(o.a.Fragment,null,m.a.CATALOG.add.cmd===e&&o.a.createElement(h.a,{silentOperation:!0,docIds:a,group:r,book:n,submitType:"add",hide:s,onSubmit:c}),m.a.DOC.move.cmd===e&&o.a.createElement(h.a,{docIds:a,group:r,book:n,submitType:"move",hide:s,onSubmit:l}),m.a.DOC.copy.cmd===e&&o.a.createElement(h.a,{docIds:a,group:r,book:n,submitType:"copy",hide:s,onSubmit:u}),m.a.DOC.export_doc.cmd===e&&o.a.createElement(p.a,{visible:!0,doc:i,bookId:n.id,onCancel:s}))}y.propTypes={activeModalType:u.a.oneOf([m.a.CATALOG.add.cmd,m.a.DOC.move.cmd,m.a.DOC.copy.cmd,m.a.DOC.export_doc.cmd,null]),book:u.a.object.isRequired,candidateDocIds:u.a.arrayOf(u.a.number).isRequired,singleCandidateDoc:u.a.object,group:u.a.object.isRequired,onCancel:u.a.func.isRequired,onAddSubmitSuccess:u.a.func.isRequired,onCopyDocsSuccess:u.a.func.isRequired,onMoveDocsSuccess:u.a.func.isRequired};var v=y,g=(r(73),r(31)),b=(r(37),r(10)),w=r(956),E=r.n(w),_=r(337),O=r(709),S=r(50),x=r(1456);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return e=function(t){var e=function(t,e){if("object"!==j(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===j(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(){C=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(A([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==j(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(j(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function P(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function N(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){P(a,n,o,i,c,"next",t)}function c(t){P(a,n,o,i,c,"throw",t)}i(void 0)}))}}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(){}function R(t){var e=t.group,r=t.book,o=t.docs,a=t.updateDocs,i=void 0===a?I:a,c=t.updateToc,u=void 0===c?I:c,l=t.updateDoc,s=void 0===l?I:l,d=t.onAddToCatalogSuccess,p=void 0===d?I:d,h=t.scrollToItem,y=t.history,v=A(Object(n.useState)(null),2),w=v[0],j=v[1],k=A(Object(n.useState)([]),2),T=k[0],P=k[1],D=T[0]&&o.find((function(t){return t.id===T[0]})),R=A(Object(n.useState)(null),2),G=R[0],M=R[1],F=function(){P([])},B=function(t){j(t)},z=function(){j(null)};var U=function(t){e.abilities.update?(P(t.map((function(t){return t.id}))),B(m.a.DOC.move.cmd)):function(t){g.a.warning({title:__("非法操作"),content:__("仅管理员可转移{type}到其它知识库",{type:O.a.getTypeText(t)})})}(t[0].type)},K=function(){var t=N(C().mark((function t(e){var n,a,c,l,f;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.docId,a=e.title,t.prev=1,t.next=4,S.a.docs.updateMeta({id:n,title:a});case 4:c=o.map((function(t){return n===t.id?L(L({},t),{},{title:a}):t})),s(n,{title:a}),i(c),l=o.find((function(t){return t.id===n})),f=r.toc.map((function(t){return t.id===n||t.url===l.slug?L(L({},t),{},{title:a}):t})),u(f),M(null),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),b.a.error(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=N(C().mark((function t(e){var r;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.targetBook,u(r.toc),i(r.docs),z(),p(D),b.a.success(__("已成功添加到目录")),F();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=N(C().mark((function t(e){var n,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.targetBook).id===r.id?u(n.toc):(a=o.filter((function(t){return!T.includes(t.id)})),i(a)),F(),z();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=N(C().mark((function t(e){var n,a,c;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.targetBook,a=e.docs,r.id===n.id&&(i(o.concat(a)),u(n.toc),(c=a[0])&&(y.push("/".concat(r.namespace,"/").concat(c.slug)),h(c))),F(),z();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{state:{activeModalType:w,candidateDocIds:T,singleCandidateDoc:D,editingDocId:G},showModalByType:B,setCandidateDocIds:P,clearEditing:function(){M(null)},actionExecutor:function(t,n){var a,c,u,l,s,d,p,h,y,v,w,O,j,k=n.docs;switch(t){case m.a.DOC.copyLink.cmd:y=k[0],v=window.location,w=v.protocol,O=v.host,j="".concat(w,"//").concat(O,"/").concat(e.login,"/").concat(r.slug,"/").concat(y.slug),E()(j),b.a.success(__("链接复制成功"));break;case m.a.DOC.open_in_new_tab.cmd:!function(t){var e="/".concat(r.namespace,"/").concat(t.slug);if(f.g)window.YuqueDesktopAppJSBridge.openExternalLink({targetUrl:e,isNewWindow:!0,parent:null});else{var n=document.createElement("a");n.setAttribute("target","_blank"),n.setAttribute("href",e),n.click()}}(k[0]);break;case m.a.DOC.open_in_new_window.cmd:!function(t){var e="/".concat(r.namespace,"/").concat(t.slug);if(f.g)window.YuqueDesktopAppJSBridge.openExternalLink({targetUrl:e,isNewWindow:!0,parent:null});else{var n=document.createElement("a");n.setAttribute("target","_blank"),n.setAttribute("href",e),n.click()}}(k[0]);break;case m.a.CATALOG.add.cmd:h=k,B(m.a.CATALOG.add.cmd),P(h.map((function(t){return t.id})));break;case m.a.DOC.copy.cmd:P(k.map((function(t){return t.id}))),B(m.a.DOC.copy.cmd);break;case m.a.DOC.move.cmd:U(k);break;case m.a.DOC.export_doc.cmd:!function(t){P([t.id]),B(m.a.DOC.export_doc.cmd)}(k[0]);break;case m.a.DOC.unshare.cmd:!function(t){P(t.map((function(t){return t.id})));var e=t.filter((function(t){return t.share&&t.share.status===_.STATUS.active})).map((function(t){return{target_type:"Doc",target_id:t.id}}));if(e.length){var r,n=__("确认关闭这 {count} 个文档的分享吗？",{count:e.length});g.a.confirm({title:n,onOk:(r=N(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.shares.batchUpdate({targets:e,status:_.STATUS.inactive});case 2:b.a.success(__("关闭分享成功")),F();case 4:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})})}else b.a.warn(__("请选择开启了分享的文档"))}(k);break;case m.a.DOC.delete.cmd:a=k,c={onOk:n.onOk},l=c.onOk,s=void 0===l?I:l,d=a.map((function(t){return t.id})),p=__("确认删除这 {count} 个文档？",{count:d.length}),g.a.confirm({title:p,content:__("删除后可在知识库回收站中恢复"),onOk:(u=N(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.docs.destroyMulti({ids:d,book_id:r.id});case 2:e=o.filter((function(t){return!d.includes(t.id)})),i(e),s();case 5:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})});break;case m.a.CATALOG.rename.cmd:!function(t){M(t.id)}(k[0]);break;case m.a.DOC.edit.cmd:!function(t){Object(x.b)("/".concat(e.login,"/").concat(r.slug,"/").concat(t.slug,"/edit"))}(k[0])}},handleCancel:function(){F(),z()},handleAddSubmitSuccess:V,handleCopyDocsSuccess:H,handleMoveDocsSuccess:q,handleEditTitleEnd:K}}R.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,docs:u.a.arrayOf(u.a.object).isRequired,updateDocs:u.a.func,updateToc:u.a.func,updateDoc:u.a.func};var G=R;function M(t){var e=t.children,r=t.group,n=t.book,a=t.docs,i=t.toc,c=t.updateDocs,u=t.updateToc,l=t.updateDoc,s=t.onAddToCatalogSuccess,f=t.scrollToItem,d=t.history,p=G({group:r,book:n,docs:a,toc:i,updateDocs:c,updateToc:u,updateDoc:l,onAddToCatalogSuccess:s,history:d,scrollToItem:f}),h=p.state,m=h.activeModalType,y=h.candidateDocIds,g=h.singleCandidateDoc,b=h.editingDocId,w=p.actionExecutor,E=p.handleCancel,_=p.clearEditing,O=p.handleAddSubmitSuccess,S=p.handleCopyDocsSuccess,x=p.handleMoveDocsSuccess,j=p.handleEditTitleEnd;return o.a.createElement(o.a.Fragment,null,e({actionExecutor:w,editingDocId:b,clearEditing:_,handleEditTitleEnd:j}),o.a.createElement(v,{activeModalType:m,group:r,book:n,candidateDocIds:y,singleCandidateDoc:g,onCancel:E,onAddSubmitSuccess:O,onCopyDocsSuccess:S,onMoveDocsSuccess:x}))}M.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,docs:u.a.arrayOf(u.a.object).isRequired,toc:u.a.arrayOf(u.a.object).isRequired,history:u.a.object.isRequired,scrollToItem:u.a.func.isRequired,updateDocs:u.a.func.isRequired,updateToc:u.a.func.isRequired,updateDoc:u.a.func.isRequired,onAddToCatalogSuccess:u.a.func,children:u.a.func.isRequired};var F=M,B=r(57),z=r.n(B),U=r(5),K=r.n(U),V=r(46),q=r(790),H=r(4476),Y=(r(785),r(424)),W=(r(498),r(100)),X=r(3899),$=r(1406),J=r(951),Z={menuItemContent:"menu-module_menuItemContent_F-sRQ",iconWrapper:"menu-module_iconWrapper_kNvaM"};function Q(t){var e=t.children,r=t.book,a=t.doc,i=t.actionExecutor,c=t.visible,u=t.onVisibleChange,l=q.a.docListActionsInReaderPage(r,a),s=Object(n.useRef)(),f=[m.a.DOC.open_in_new_window.cmd],d=Object(J.b)();return o.a.createElement(Y.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["click"],hideWhenInactive:!0,autoAdjustOverflow:!0,arrowPointAtCenter:!0,hiddenWhenInactive:!0,visible:c,onVisibleChange:function(t){null==u||u(t)},getPopupContainer:function(){var t;return(null===(t=s.current)||void 0===t?void 0:t.closest("[".concat(X.c,"]")))||document.body},content:o.a.createElement(W.a,{onClick:function(t){t.domEvent.preventDefault(),t.domEvent.stopPropagation(),null==u||u(!1),t.key!==m.a.DOC.divide.cmd&&(d||f.includes(t.key))&&i(t.key,{docs:[a]})}},l.map((function(t,e){if(t.cmd===m.a.DOC.divide.cmd)return o.a.createElement(W.a.Divider,{key:t.cmd+e});var r,n=o.a.createElement("div",{className:Z.menuItemContent},o.a.createElement("span",{className:Z.iconWrapper},o.a.createElement(V.b,{name:t.icon,width:16,height:16})),o.a.createElement("span",{className:Z.title},t.title));return o.a.createElement(W.a.Item,{key:t.cmd},f.includes(t.cmd)?n:(r=n,o.a.createElement($.a,{tooltipPlacement:"right"},r)))})))},o.a.cloneElement(e,{ref:s}))}Q.propTypes={book:u.a.object.isRequired,doc:u.a.object.isRequired,actionExecutor:u.a.func.isRequired,onVisibleChange:u.a.func};var tt=Q,et=(r(60),r(14));function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(){nt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==rt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(rt(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function ot(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function at(t){var e=t.isEditing,r=t.clearEditing,o=t.onEditEnd,a=t.title,i=t.docId,c=Object(n.useRef)(null),u=function(){var t,e=(t=nt().mark((function t(e){var n;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.target.value)!==a){t.next=4;break}return r(),t.abrupt("return");case 4:if(n){t.next=9;break}return b.a.error(__("名称不能为空")),c.current.focus(),r(),t.abrupt("return");case 9:return t.next=11,o({docId:i,title:n});case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ot(a,n,o,i,c,"next",t)}function c(t){ot(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}();return{inputRef:c,handleKeyUp:function(t){"Escape"!==t.key&&27!==t.keyCode||u(t)},handleEditEnd:u,handleFocus:function(t){e&&t.target.select()}}}function it(t){var e=t.doc,r=t.isEditing,n=t.onEditEnd,a=t.clearEditing,i=at({docId:e.id,title:e.title,clearEditing:a,onEditEnd:n}),c=i.inputRef,u=i.handleFocus,l=i.handleKeyUp,s=i.handleEditEnd;return r?o.a.createElement(et.a,{ref:c,autoFocus:!0,defaultValue:e.title,onPressEnter:s,onKeyUp:l,onBlur:s,onFocus:u,onClick:function(t){t.stopPropagation(),t.preventDefault()}}):o.a.createElement("span",{title:e.title},e.title)}it.defaultProps={onEditEnd:function(){}},it.propTypes={doc:u.a.object.isRequired,isEditing:u.a.bool.isRequired,clearEditing:u.a.func.isRequired,onEditEnd:u.a.func};var ct=it,ut="DocListItem-module_titleDescItem_5i1OT",lt="DocListItem-module_itemContent_+9eRg",st="DocListItem-module_head_xKk+B",ft="DocListItem-module_title_u75Ej",dt="DocListItem-module_slugActive_tPuA6",pt="DocListItem-module_actionsCont_v8h3R",ht="DocListItem-module_actionsContVisible_u4Ofk",mt="DocListItem-module_menuTrigger_lf85O",yt="DocListItem-module_icon_Bo-tN",vt="DocListItem-module_desc_0ZK5z";function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function bt(t,e,r){return e=function(t){var e=function(t,e){if("object"!==gt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===gt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Et(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _t(t){var e=t.book,r=t.doc,a=t.actionExecutor,c=t.isEditing,u=t.isSlugActive,l=t.clearEditing,s=t.onEditEnd,d=function(t){var e=t.book,r=t.doc,o=t.actionExecutor,a=wt(Object(n.useState)(!1),2),i=a[0],c=a[1],u=q.a.adminActions(e,r,!0);return{state:{url:"/".concat(e.namespace,"/").concat(r.slug),tempStoreActionsVisible:u.length>0,menuVisible:i,setMenuVisible:c},handleAddToCatalog:function(){return o(m.a.CATALOG.add.cmd,{docs:[r]})}}}(t),p=d.state,h=p.url,y=p.tempStoreActionsVisible,v=p.menuVisible,g=p.setMenuVisible,b=wt(o.a.useState(!1),2),w=b[0],E=b[1],_=wt(Object(n.useState)({x:0,y:0}),2),O=_[0],S=_[1];Object(H.a)({id:"lark-tree-ctxmenu-trigger"});var x=Object(n.useCallback)((function(t){f.g&&!1===w&&(t.preventDefault(),S({x:t.clientX,y:t.clientY}),E(!0))}),[]);return o.a.createElement("div",{className:ut,onDragStart:function(t){return t.preventDefault()},onContextMenu:x},o.a.createElement(i.NavLink,{to:h,className:K()(lt,bt({},dt,u)),onClick:function(t){if(t.metaKey||t.shiftKey){if(t.preventDefault(),f.g)return void window.YuqueDesktopAppJSBridge.openExternalLink({targetUrl:h,isNewWindow:!0});var e=document.createElement("a");e.setAttribute("target","_blank"),e.setAttribute("href",h),e.click()}}},o.a.createElement("div",{className:K()(st,bt({},dt,u))},o.a.createElement("div",{className:ft},o.a.createElement(ct,{isEditing:c,url:h,doc:r,clearEditing:l,onEditEnd:s})),o.a.createElement("div",{className:K()(pt,bt({},ht,v)),onClick:function(t){return t.preventDefault()}},function(){if(!c&&y)return o.a.createElement(o.a.Fragment,null,z.a.createPortal(o.a.createElement(tt,{book:e,doc:r,actionExecutor:a,visible:w,onVisibleChange:E},o.a.createElement("div",{style:{position:"fixed",left:O.x,top:O.y,width:1,height:1,background:"transparent"}})),document.querySelector("#lark-tree-ctxmenu-trigger")),o.a.createElement(tt,{book:e,doc:r,actionExecutor:a,visible:v,onVisibleChange:g},o.a.createElement("span",{className:mt},o.a.createElement(V.b,{name:"more",width:16,className:yt}))))}())),o.a.createElement("div",{className:vt},r.custom_description||r.description)))}_t.defaultProps={onEditEnd:function(){}},_t.propTypes={actionExecutor:u.a.func,book:u.a.object.isRequired,doc:u.a.object.isRequired,isSlugActive:u.a.bool.isRequired,isEditing:u.a.bool.isRequired,clearEditing:u.a.func.isRequired,onEditEnd:u.a.func,isDocNotInToc:u.a.bool};var Ot=o.a.memo(_t),St="docList-module_docList_cSBI2",xt="docList-module_desktopDocList_-eMUd";var jt=new Intl.Collator(void 0,{numeric:!0});function kt(t,e){return new Date(e).getTime()-new Date(t).getTime()}function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){Pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pt(t,e,r){return e=function(t){var e=function(t,e){if("object"!==Lt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Lt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Nt=o.a.memo((function(t){var e=t.data,r=t.index,n=t.style,a=e.listData,i=e.book,c=e.group,u=e.currentDocSlug,l=e.updateDocs,s=e.updateToc,f=e.updateDoc,d=e.onAddToCatalogSuccess,p=e.navigateToNextDoc,h=e.history,m=e.scrollToItem,y=a[r],v=y.slug===u;return o.a.createElement("div",{style:n},o.a.createElement(F,{group:c,book:i,docs:i.docs,toc:i.toc,history:h,scrollToItem:m,updateDocs:l,updateToc:s,updateDoc:f,onAddToCatalogSuccess:d},(function(t){var e=t.actionExecutor,r=t.editingDocId,n=t.handleEditTitleEnd,a=t.clearEditing,c=r===y.id;return o.a.createElement(Ot,{isSlugActive:v,isEditing:c,book:i,doc:y,actionExecutor:function(t,r){"delete"===t&&v&&(r.onOk=function(){return p(y)}),e(t,r)},onEditEnd:n,clearEditing:a})})))}),l.c);function At(t,e){var r=t.space,o=t.group,a=t.book,i=t.dispatch,c=t.currentDocSlug,u=t.history,l=t.virtualListRef,s=new d.a(r,o,a).getSort(),f=Object(n.useMemo)((function(){return a.docs.sort((function(t,e){switch(s){case"content_updated_at":default:return kt(t.content_updated_at,e.content_updated_at);case"created_at":return kt(t.created_at,e.created_at);case"title":return r=t.title,n=e.title,function(t,e,r){var n=t.compare(e,r);return 0!==n?n:e.length!==r.length?e.length<r.length?-1:1:0}(jt,r=r||"",n=n||"")}var r,n}))}),[a.docs,s]),p=a.toc||[],h=Object(n.useRef)(!1);function m(t){var e,r=f.findIndex((function(e){return e.id===t.id||e.slug===t.slug})),n=r<1?0:r-1;null===(e=l.current)||void 0===e||e.scrollToItem(n,"start")}return Object(n.useEffect)((function(){if(!h.current){var t=f.find((function(t){return t.slug===c}));t&&(m(t),h.current=!0)}}),[f,c]),Object(n.useImperativeHandle)(e,(function(){return{scrollToItem:m}})),{state:{allDocs:f,toc:p},updateDocs:function(t){i({type:"book/updateDocs",payload:t})},updateToc:function(t){i({type:"book/updateToc",payload:t})},updateDoc:function(t,e){var r=f.find((function(e){return e.id===t}));r&&r.slug===c&&i({type:"doc/update",payload:e})},navigateToNextDoc:function(t){var e=f.findIndex((function(e){return e.id===t.id})),r=e+1;r>f.length-1&&(r=e-1);var n=f[r];if(n){var o="/".concat(a.namespace,"/").concat(n.slug);u.push(o)}else u.push("/".concat(a.namespace))},scrollToItem:m}}var Dt=Object(n.memo)(Object(n.forwardRef)((function(t,e){var r=t.group,c=t.book,u=t.currentDocSlug,d=t.onAddToCatalogSuccess,p=Object(n.useRef)(null),h=Object(a.e)(),m=Object(i.useHistory)(),y=At(Ct(Ct({},t),{},{virtualListRef:p,dispatch:h,history:m}),e),v=y.state,g=y.updateDocs,b=y.updateToc,w=y.updateDoc,E=y.navigateToNextDoc,_=y.scrollToItem,O={listData:v.allDocs,group:r,book:c,currentDocSlug:u,updateDocs:g,updateToc:b,updateDoc:w,navigateToNextDoc:E,onAddToCatalogSuccess:d,history:m,scrollToItem:_};return o.a.createElement("div",{className:f.c?xt:St},o.a.createElement(s.a,null,(function(t){var e=t.height,r=t.width;return o.a.createElement(l.b,{ref:p,className:"virtual-list",width:r,height:e,itemCount:v.allDocs.length,itemSize:106,itemData:O},Nt)})))})));Dt.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,onAddToCatalogSuccess:u.a.func.isRequired,currentDocSlug:u.a.string},Dt.displayName="DocListViewer";var It=Dt},651:function(t,e,r){"use strict";r(2890);var n=r(1232);r(999);e.a=n.a},954:function(t,e,r){"use strict";r(2899);var n=r(801),o=r(83),a=r.n(o),i=r(58),c=r.n(i),u=r(1206),l=r.n(u),s=r(86),f=r.n(s),d=r(137),p=r.n(d),h=r(0),m=r.n(h),y=r(2),v=r.n(y),g=r(5),b=r.n(g),w=r(84),E=r.n(w),_=r(175),O=r.n(_);var S=r(64),x=r.n(S)()("useInifiniteScroll"),j=function(t,e){var r,n,o,a,i,c,u=(r=!1,n=Object(h.useState)(r),o=O()(n,2),a=o[0],i=o[1],(c=Object(h.useRef)(a)).current=a,[a,i,Object(h.useCallback)((function(){return c.current}),[])]),s=O()(u,3),f=s[0],d=s[1],m=s[2],y=Object(h.useRef)(null);y.current=t;var v=Object(h.useCallback)(function(){var t=l()(p.a.mark((function t(e){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=O()(e,1),n=r[0],!m()){t.next=3;break}return t.abrupt("return");case 3:if(null==n||!n.isIntersecting){t.next=12;break}return x("entry?.isIntersecting",null==n?void 0:n.isIntersecting),t.prev=5,d(!0),t.next=9,y.current();case 9:return t.prev=9,d(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[5,,9,12]])})));return function(e){return t.apply(this,arguments)}}(),[y]);return{loading:f,refCallback:Object(h.useCallback)((function(t){x("ref",t);var r,n=null;if(t&&!n&&window.IntersectionObserver)return x("enter"),n=new IntersectionObserver(v,{threshold:(null==e?void 0:e.threshold)||.1,root:(null===(r=e.root)||void 0===r?void 0:r.current)||null}),x("observe",t),n.observe(t),function(){return n.unobserve(t)}}),[e.threshold])}},k=r(704),L=r(138),T=(r(1196),["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadOnScroll","listContainer"]);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var N=m.a.forwardRef((function(t,e){var r=t.className,o=t.emptyView,a=t.onLoadMore,i=t.dataSource,u=t.renderItem,s=t.loading,d=t.showLoadingMore,h=t.pagination,y=t.children,v=t.justify,g=t.customItem,w=t.loadOnScroll,E=t.listContainer,_=f()(t,T),O=t.loadMoreText,S=void 0===O?Object(k.a)("查看更多"):O,x=s;"boolean"==typeof x&&(x={spinning:x});var C=x&&x.spinning,N=j(l()(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w||!a){t.next=3;break}return t.next=3,a();case 3:case"end":return t.stop()}}),t)}))),{root:E}),A=N.loading,D=N.refCallback;w&&(S=Object(k.a)("到底了"));var I=i.length&&d?m.a.createElement("div",{className:"larkui-list-block-more"},C&&m.a.createElement(L.a,c()({justify:"block"},x)),!C&&m.a.createElement("a",{className:"larkui-list-block-more-btn",ref:D,onClick:function(t){t.preventDefault(),a&&a()}},A?Object(k.a)("加载中"):S)):null;if(C&&!I)return m.a.createElement("div",{className:b()("larkui-list","larkui-list-loading")},m.a.createElement(L.a,c()({justify:"block"},x)));var R=h;return R&&(R=h.total<=h.pageSize?null:P({showSizeChanger:!1},R)),m.a.createElement(n.b,c()({ref:e,className:b()(r,"larkui-list",{"larkui-list-justify-block":"block"===v}),loading:!1,loadMore:I,pagination:R,dataSource:i.length>0?i:t.emptyView?["empty"]:[],renderItem:function(t,e){if("empty"===t)return m.a.createElement("div",{className:"blankslate"},o);var r=u(t,e);return r?g?r:m.a.createElement(n.b.Item,{key:t.id},r):m.a.createElement("div",null)}},_),y)}));N.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},N.propTypes=P(P({},n.b.ListProps),{},{className:v.a.string,emptyView:v.a.node,onLoadMore:v.a.func,dataSource:v.a.array,renderItem:v.a.func,loading:v.a.oneOfType([v.a.bool,v.a.object]),showLoadingMore:v.a.bool,pagination:v.a.object,children:v.a.node,justify:v.a.oneOf(["block","flex"]),customItem:v.a.bool,loadOnScroll:v.a.bool,listContainer:v.a.node}),E()(N,n.b);e.a=N},956:function(t,e,r){"use strict";var n=r(1616),o={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var r,a,i,c,u,l,s=!1;e||(e={}),r=e.debug||!1;try{if(i=n(),c=document.createRange(),u=document.getSelection(),(l=document.createElement("span")).textContent=t,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),e.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[e.format]||o.default;window.clipboardData.setData(a,t)}else n.clipboardData.clearData(),n.clipboardData.setData(e.format,t);e.onCopy&&(n.preventDefault(),e.onCopy(n.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),u.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),s=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),a=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,t)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),l&&document.body.removeChild(l),i()}return s}}}]);